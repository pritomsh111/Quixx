let preloader=document.querySelector(".preloader"),modal=document.querySelector(".Modal__Quixx"),backdrop=document.querySelector(".backdrop"),loaderDiv=document.querySelector(".Signup__Loader"),modalErr=document.querySelector(".Signup__Loader>h2"),loader=document.querySelector(".circle-loader"),checkmark=document.querySelector(".checkmark"),modalCloseButton=document.querySelector(".close-button"),modalNextButton=document.querySelector(".next-button"),modalDoneButton=document.querySelector(".done-button"),forgotPassword=document.querySelector(".forgot_pass"),modal_header=document.querySelector(".modal-header"),forgotPass=document.querySelector(".forgot-pass"),modalError=document.querySelector(".modal-error"),modalFooter=document.querySelector(".Modal__Quixx .modal-footer"),phone_number=document.querySelector("#phone_number"),fp_restore=document.querySelector("#fp-restore"),fp_step1=document.querySelector(".FP-step-1"),fp_step2=document.querySelector(".FP-step-2");setTimeout(()=>{preloader.style.opacity=0,preloader.style.visibility="hidden"},1e3),backdrop.addEventListener("click",(function(){this.classList.remove("show"),modal.classList.contains("show")&&modal.classList.remove("show")})),forgotPassword.addEventListener("click",(function(){loaderDiv.style.display="none",modalError.style.display="none",forgotPass.style.display="block",modalFooter.style.marginTop="10rem",modal_header.innerHTML="<h2>Forgot Password?</h2>",backdrop.classList.add("show"),modal.classList.add("show"),modalCloseButton.style.display="inline",modalNextButton.style.display="inline",modalNextButton.disabled=!0,modalDoneButton.style.display="none",fp_step1.classList.add("show"),fp_step1.classList.remove("hide"),fp_step2.classList.add("hide"),fp_step2.classList.remove("show"),phone_number.value=""})),modalCloseButton.addEventListener("click",(function(){backdrop.classList.remove("show"),modal.classList.remove("show")})),modalNextButton.addEventListener("click",(function(){phone=document.querySelector("#phone_number").value,$.ajax({type:"POST",url:api+"forget/password/get/vCode/"+phone,success:function(e){fp_restore.value="",fp_step2.classList.add("show"),fp_step2.classList.remove("hide"),fp_step1.classList.add("hide"),fp_step1.classList.remove("show"),modalCloseButton.style.display="none",modalNextButton.style.display="none",modalDoneButton.style.display="inline"},error:function(e){let o=Object.keys(e),t=document.querySelector(".modal-error>h2");"responseJSON"===o[17]?t.innerHTML=e.responseJSON.errorMessage:t.innerHTML="Please Wait! We are working!",modalErrorFunc()}})})),phone_number.addEventListener("keyup",(function(e){11===e.target.value.match(/\d/g).length?modalNextButton.disabled=!1:modalNextButton.disabled=!0})),fp_restore.addEventListener("keyup",(function(e){4===e.target.value.match(/\d/g).length?modalDoneButton.disabled=!1:modalDoneButton.disabled=!0})),modalDoneButton.addEventListener("click",(function(){loaderDiv.style.display="block",forgotPass.style.display="none",modalError.style.display="none",modalErr.innerHTML="",modalFooter.style.marginTop="0rem",loader.classList.remove("load-complete"),checkmark.style.display="none",loader.style.display="inline-block",modalDoneButton.style.display="none",modalCloseButton.style.display="inline",modalCloseButton.disabled=!0;let e=document.querySelector("#fp-restore").value;$.ajax({type:"GET",url:api+"forget/password/submit/vCode/"+phone+"/"+e,success:function(e){if(!0===e.data)setTimeout((function(){loader.classList.remove("load-complete"),setTimeout((function(){loader.classList.add("load-complete"),checkmark.style.display="block",modalErr.innerHTML="You will receive an SMS!",modalErr.style.color="#0066b3",modalCloseButton.disabled=!1}),1e3)}),2e3);else{loader.style.display="none",modalCloseButton.disabled=!1,document.querySelector(".modal-error>h2").innerHTML="Wrong Code!",modalErrorFunc()}},error:function(e){let o=Object.keys(e),t=document.querySelector(".modal-error>h2");"responseJSON"==o[17]?t.innerHTML=e.responseJSON.errorMessage:t.innerHTML="Please Wait! We are working!",modalErrorFunc()}})}));let modalErrorFunc=()=>{loaderDiv.style.display="none",forgotPass.style.display="none",modalError.style.display="block",modalFooter.style.marginTop="0rem",modalCloseButton.style.display="inline",modalNextButton.style.display="none",modalDoneButton.style.display="none",modal_header.innerHTML="",backdrop.classList.add("show"),modal.classList.add("show")},modalSignupFunc=()=>{loaderDiv.style.display="block",forgotPass.style.display="none",modalError.style.display="none",modalErr.innerHTML="",loader.classList.remove("load-complete"),checkmark.style.display="none",loader.style.display="inline-block",modalFooter.style.marginTop="0rem",modalCloseButton.style.display="inline",modalCloseButton.disabled=!0,modalNextButton.style.display="none",modalDoneButton.style.display="none",modal_header.innerHTML="",backdrop.classList.add("show"),modal.classList.add("show")},passIcon=document.querySelector(".password i"),password=document.querySelector("#password");function clearError(){document.querySelectorAll("p.error").forEach(e=>e.innerHTML="")}function createError(e,o){if(clearError(),"password"===o)return document.querySelector(`.${o}+p`).innerHTML=e,void document.querySelector("#"+o).focus();document.querySelector(`.${o}>p`).innerHTML=e,document.querySelector("#"+o).focus()}passIcon.addEventListener("click",(function(){passIcon.classList.contains("fa-eye-slash")?(passIcon.setAttribute("class","fa fa fa-eye"),password.setAttribute("type","text")):(passIcon.setAttribute("class","fa fa fa-eye-slash"),password.setAttribute("type","password"))})),document.querySelector("#login").addEventListener("click",(function(){let e=document.querySelector("#username").value,o=document.querySelector("#password").value;""===e&&(createError("Username cannot be empty!","username"),1)||""===o&&(createError("Password cannot be empty!","password"),1)||(clearError(),localStorage.setItem("user",e),localStorage.setItem("pass",o),localStorage.setItem("wh-user",document.location.pathname),$.ajax({async:!0,type:"POST",url:api+"login",headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify({username:e,password:o}),success:function(e){localStorage.setItem("login-event","login"+Math.random()),localStorage.setItem("main-token",e.data),window.location.href="../panel.html"},error:function(e){let o=Object.keys(e),t=document.querySelector(".modal-error>h2");"responseJSON"==o[17]?t.innerHTML=e.responseJSON.errorMessage:t.innerHTML="Please Wait! We are working!",modalErrorFunc()}}))}));