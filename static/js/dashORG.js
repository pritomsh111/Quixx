var comp,incomp;window.addEventListener("storage",(function(e){"logout-event"==e.key&&(window.location=""+localStorage.getItem("wh-user"))}));var myMap=[],myMap2=[];$(document).ready((function(){$.fn.dataTable.ext.classes.sPageButton="btn btn-outline btn-round",beforeOne();var e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),a=e.getFullYear();e=t+"/"+n+"/"+a,document.getElementById("date1").innerHTML=e,document.getElementById("date3").innerHTML=e,document.getElementById("date4").innerHTML=e,document.getElementById("date5").innerHTML=e,document.getElementById("date6").innerHTML=e,document.getElementById("date64").innerHTML=e,document.getElementById("date65").innerHTML=e,document.getElementById("date66").innerHTML=e,document.getElementById("date7").innerHTML=e,document.getElementById("date7Package").innerHTML=e}));var zero=()=>{$.ajax({async:!0,type:"GET",url:urlForAll+"profile/get/profile/"+localStorage.getItem("userID"),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(e){document.title=e.data.sender_name,document.getElementById("dashName").innerHTML=e.data.sender_name+"'s Panel"}})},beforeOne=()=>{$.ajax({async:!0,type:"GET",url:urlForAll+"package/"+localStorage.getItem("userID"),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},beforeSend:function(e){document.getElementById("packageName").innerHTML="<div class=loader5></div>"},success:function(e){e.data?document.getElementById("packageName").innerHTML=e.data:document.getElementById("packageName").innerHTML="None",one()},error:function(e,t,n){}})},one=()=>{$.ajax({async:!0,type:"GET",url:urlForAll+"orgHead/sms/count/"+localStorage.getItem("userID"),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},beforeSend:function(e){document.getElementById("messageCount").innerHTML="<div class=loader5></div>"},success:function(e){e.data>0?document.getElementById("messageCount").innerHTML=e.data:document.getElementById("messageCount").innerHTML="0",two()},error:function(e,t,n){}})},two=()=>{$.ajax({async:!0,type:"GET",url:urlForAll+"user/total/deliveryMan/"+localStorage.getItem("userID"),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},beforeSend:function(e){document.getElementById("totalDeliveryMan").innerHTML="<div class=loader5></div>"},success:function(e){e.data>0?document.getElementById("totalDeliveryMan").innerHTML=e.data:document.getElementById("totalDeliveryMan").innerHTML="0",three()},error:function(e,t,n){}})},three=()=>{$.ajax({async:!0,type:"GET",url:urlForAll+"orgHead/merchant/count/"+localStorage.getItem("userID"),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},beforeSend:function(){document.getElementById("approvedMer").innerHTML="<div class=loader5></div>"},success:function(e){e.data>0?document.getElementById("approvedMer").innerHTML=e.data:document.getElementById("approvedMer").innerHTML="0",four()},error:function(e,t,n){}})},four=()=>{$.ajax({async:!0,type:"GET",url:urlForAll+"orgHead/merchant/unapprove/count/"+localStorage.getItem("userID"),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},beforeSend:function(){document.getElementById("unApprovedMer").innerHTML="<div class=loader5></div>"},success:function(e){e.data>0?document.getElementById("unApprovedMer").innerHTML=e.data:document.getElementById("unApprovedMer").innerHTML="0",five()},error:function(e,t,n){}})},five=()=>{$.ajax({async:!0,type:"GET",url:urlForAll+"orgHead/total/complete/delivery/"+localStorage.getItem("userID"),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},beforeSend:function(){document.getElementById("totalCompletedDeliveries").innerHTML="<div class=loader5></div>"},success:function(e){e.data>0?document.getElementById("totalCompletedDeliveries").innerHTML=e.data:document.getElementById("totalCompletedDeliveries").innerHTML="0",six()},error:function(e,t,n){}})},six=()=>{$.ajax({async:!0,type:"GET",url:urlForAll+"delivery/total/incomplete/delivery/"+localStorage.getItem("userID"),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},beforeSend:function(){document.getElementById("totalIncompleteDeliveries").innerHTML="<div class=loader5></div>"},success:function(e){e.data>0?document.getElementById("totalIncompleteDeliveries").innerHTML=e.data:document.getElementById("totalIncompleteDeliveries").innerHTML="0",seven()},error:function(e,t,n){}})},seven=()=>{$.ajax({async:!0,type:"GET",url:urlForAll+"delivery/delivery/status/count/"+localStorage.getItem("userID")+"/ON_HOLD",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},beforeSend:function(e){document.getElementById("totalOnHoldDeliveries").innerHTML="<div class=loader5></div>"},success:function(e){e.data>0?document.getElementById("totalOnHoldDeliveries").innerHTML=e.data:document.getElementById("totalOnHoldDeliveries").innerHTML="0",eight()},error:function(e,t,n){}})},eight=()=>{$.ajax({async:!0,type:"GET",url:urlForAll+"delivery/delivery/status/count/"+localStorage.getItem("userID")+"/RETURNED",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},beforeSend:function(e){document.getElementById("totalReturnedDeliveries").innerHTML="<div class=loader5></div>"},success:function(e){e.data>0?document.getElementById("totalReturnedDeliveries").innerHTML=e.data:document.getElementById("totalReturnedDeliveries").innerHTML="0",nine()},error:function(e,t,n){}})},nine=()=>{$.ajax({async:!0,type:"GET",url:urlForAll+"delivery/delivery/status/count/"+localStorage.getItem("userID")+"/CANCELLED",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},beforeSend:function(e){document.getElementById("totalCancelledDeliveries").innerHTML="<div class=loader5></div>"},success:function(e){e.data>0?document.getElementById("totalCancelledDeliveries").innerHTML=e.data:document.getElementById("totalCancelledDeliveries").innerHTML="0",ten()},error:function(e,t,n){}})},ten=()=>{$("#dtBasicExample").DataTable({processing:!0,language:{loadingRecords:"&nbsp;",processing:"<h4 style='color:#0066b3'>Loading...</h4>"},destroy:!0,oSearch:{bSmart:!1,bRegex:!0},deferRender:!0,paging:!0,destroy:!0,ajax:{url:urlForAll+"orgHead/haveTo/pay/merchant/"+localStorage.getItem("userID"),type:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},dataSrc:"data"},columns:[{targets:0,data:"merchant_name"},{targets:1,data:"total_product_cost",render:$.fn.dataTable.render.number(",",".",0,'<span style="color:#0066b3;font-size:11px;">&#2547;</span>')},{targets:2,data:"null",render:function(e,t,n){return myMap[n.merchant_id]=n,'<button id="'+n.merchant_id+'" class="btn-round btn-outline btn" onclick="show(this)">Details</button>'}}]}).clear().draw(),$('.dataTables_filter input[type="search"]').attr("placeholder","Search").css({width:"200px",display:"inline-block",background:"white"}),$('.dataTables_filter input[type="search"]').attr("class","btn btn-round").css({width:"200px",display:"inline-block",color:"#000000",background:"#FFFFFA"}),$(".dataTables_length select").attr("class","btn btn-round").css({width:"80px","background-color":"white",color:"#000000",background:"#FFFFFA"}),eleven()},eleven=()=>{$("#dtBasicExample2").DataTable({processing:!0,language:{loadingRecords:"&nbsp;",processing:"<h4 style='color:#0066b3'>Loading...</h4>"},destroy:!0,oSearch:{bSmart:!1,bRegex:!0},deferRender:!0,paging:!0,destroy:!0,ajax:{url:urlForAll+"orgHead/due/payment/"+localStorage.getItem("userID"),type:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},dataSrc:"data"},columns:[{targets:0,data:"merchant_name"},{targets:1,data:"total_product_cost",render:$.fn.dataTable.render.number(",",".",0,'<span style="color:#0066b3;font-size:11px;">&#2547;</span>')},{targets:2,data:"null",render:function(e,t,n){return myMap2[n.merchant_id]=n,'<button id="'+n.merchant_id+'" class="btn-round btn-outline btn" onclick="show2(this)">Details</button>'}}]}).clear().draw(),$('.dataTables_filter input[type="search"]').attr("placeholder","Search").css({width:"200px",display:"inline-block",background:"white"}),$('.dataTables_filter input[type="search"]').attr("class","btn btn-round").css({width:"200px",display:"inline-block",color:"#000000",background:"#FFFFFA"}),$(".dataTables_length select").attr("class","btn btn-round").css({width:"80px","background-color":"white",color:"#000000",background:"#FFFFFA"}),zero()},show=e=>{var t=e.id;document.getElementById("myModalLabelz").innerHTML="Total Payable [Completed Deliveries]",document.getElementById("myModalLabelz").style.color="#0066b3",document.getElementById("myModalLabelzz").innerHTML="CASH ON DELIVERY";var n=$("#dtBasicExampled12").DataTable({processing:!0,language:{loadingRecords:"&nbsp;",processing:"<h4 style='color:#0066b3'>Loading...</h4>"},oSearch:{bSmart:!1,bRegex:!0},deferRender:!0,destroy:!0});n.clear().draw();$.each(myMap[t].deliveries_ids,(function(e,a){var o="<tr><td>"+myMap[t].deliveries_ids[e]+"</td><td>"+myMap[t].product_costs[e]+"</td><td>"+myMap[t].cod_charges[e]+"</td></tr>";n.rows.add($(o)).draw()})),$('.dataTables_filter input[type="search"]').attr("placeholder","Search anything!").css({width:"300px",display:"inline-block",background:"white"}),$('.dataTables_filter input[type="search"]').attr("class","btn btn-round").css({width:"300px",display:"inline-block",color:"#000000",background:"#FFFFFA"}),$(".dataTables_length select").attr("class","btn btn-round").css({width:"80px","background-color":"white",color:"#000000",background:"#FFFFFA"}),$("#myModalz").modal("show")},show2=e=>{var t=e.id;document.getElementById("myModalLabelz").innerHTML="Total Payable [Ongoing Deliveries]",document.getElementById("myModalLabelz").style.color="#BF033B",document.getElementById("myModalLabelzz").innerHTML="CASH ON DELIVERY";var n=$("#dtBasicExampled12").DataTable({processing:!0,language:{loadingRecords:"&nbsp;",processing:"<h4 style='color:#0066b3'>Loading...</h4>"},oSearch:{bSmart:!1,bRegex:!0},deferRender:!0,destroy:!0});n.clear().draw();$.each(myMap2[t].deliveries_ids,(function(e,a){var o="<tr><td>"+myMap2[t].deliveries_ids[e]+"</td><td>"+myMap2[t].product_costs[e]+"</td><td>"+myMap2[t].cod_charges[e]+"</td></tr>";n.rows.add($(o)).draw()})),$('.dataTables_filter input[type="search"]').attr("placeholder","Search anything!").css({width:"300px",display:"inline-block",background:"white"}),$('.dataTables_filter input[type="search"]').attr("class","btn btn-round").css({width:"300px",display:"inline-block",color:"#000000",background:"#FFFFFA"}),$(".dataTables_length select").attr("class","btn btn-round").css({width:"80px","background-color":"white",color:"#000000",background:"#FFFFFA"}),$("#myModalz").modal("show")};