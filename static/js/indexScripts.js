var myNode,user=localStorage.getItem("user"),pass=localStorage.getItem("pass"),fileTag=document.getElementById("filetag"),fileTag2=document.getElementById("filetag2"),preview=document.getElementById("preview"),token=localStorage.getItem("main-token"),decoded=jwt_decode(token);if(localStorage.setItem("token",token),localStorage.setItem("userID",decoded.id),localStorage.setItem("userEmail",decoded.email),localStorage.setItem("user",decoded.role[0].roleName),user=decoded.role[0].roleName,localStorage.removeItem("pass"),"SUPER_ADMIN"==user){for($("#logooo").hide(),document.title="Super Admin",myNode=document.getElementById("merchant");myNode.firstChild;)myNode.removeChild(myNode.firstChild);for(myNode.remove(),myNode=document.getElementById("organizationHead");myNode.firstChild;)myNode.removeChild(myNode.firstChild);myNode.remove(),(preview=document.getElementById("preview")).setAttribute("src","static/img/Logo.png"),document.getElementById("dashName").innerHTML="Super Admin's Panel"}else if("ORGANIZATIONAL_ADMIN"==user){function changeImage(e){var t;e.files&&e.files[0]&&((t=new FileReader).onload=function(e){$.ajax({type:"POST",url:urlForAll+"approved/insert/logo",data:JSON.stringify({user_id:localStorage.getItem("userID"),image_str:e.target.result}),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(t){$("#one1").hide(),$("#two2").show(),preview.setAttribute("src",e.target.result)}})},t.readAsDataURL(e.files[0]))}function changeImage2(e){var t;e.files&&e.files[0]&&((t=new FileReader).onload=function(e){$.ajax({type:"PUT",url:urlForAll+"approved/update/logo",data:JSON.stringify({user_id:localStorage.getItem("userID"),image_str:e.target.result}),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(t){$("#one1").hide(),$("#two2").show(),preview.setAttribute("src",e.target.result)}})},t.readAsDataURL(e.files[0]))}for($.ajax({type:"GET",url:urlForAll+"orgHead/get/logo/"+localStorage.getItem("userID"),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(e){""==e.data.image_str?$("#two2").hide():""!=e.data.image_str&&(preview.setAttribute("src",e.data.image_str),$("#one1").hide())}}),fileTag.addEventListener("change",(function(){changeImage(this)})),fileTag2.addEventListener("change",(function(){changeImage2(this)})),$.ajax({type:"GET",url:urlForAll+"orgHead/get/org/name/"+localStorage.getItem("userID"),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(e){document.getElementById("namee").innerHTML=e.data,document.getElementById("dashName").innerHTML=e.data+"'s Panel",document.title=e.data}}),myNode=document.getElementById("merchant");myNode.firstChild;)myNode.removeChild(myNode.firstChild);for(myNode.remove(),myNode=document.getElementById("superAdmin");myNode.firstChild;)myNode.removeChild(myNode.firstChild);myNode.remove()}else if("MERCHANT"==user){$("#logooo").hide(),$.ajax({type:"GET",url:urlForAll+"merchant/get/org/logo/"+localStorage.getItem("userID"),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(e){preview.setAttribute("src",e.data.image_str)}}),$.ajax({type:"GET",url:urlForAll+"merchant/get/org/name/"+localStorage.getItem("userID"),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(e){document.getElementById("namee").innerHTML=e.data}}),$.ajax({type:"GET",url:urlForAll+"profile/get/profile/"+localStorage.getItem("userID"),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(e){document.title=e.data.sender_name,document.getElementById("dashName").innerHTML=e.data.sender_name+"'s Panel"}});fileTag=document.getElementById("filetag"),fileTag2=document.getElementById("filetag2");for(preview=document.getElementById("preview"),myNode=document.getElementById("organizationHead");myNode.firstChild;)myNode.removeChild(myNode.firstChild);for(myNode.remove(),myNode=document.getElementById("superAdmin");myNode.firstChild;)myNode.removeChild(myNode.firstChild);myNode.remove()}else localStorage.removeItem("user"),window.location.href="index.html";