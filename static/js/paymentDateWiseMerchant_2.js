var dataIncom,dataCom,merchant_ID=localStorage.getItem("userID");$.ajax({async:!0,type:"GET",cors:!0,contentType:"application/json",secure:!0,crossDomain:!0,url:urlForAll+"merchant/cod/charge/"+merchant_ID,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(t){percentage=t.data}});var incompleteDeliveries=()=>{document.getElementById("body").style.pointerEvents="none",document.getElementById("onea").disabled=!0,document.getElementById("twoa").disabled=!1,document.getElementById("onea").style.fontSize="14.5px",document.getElementById("twoa").style.fontSize="13px",document.getElementById("twoa").innerHTML="Due From Completed Deliveries",$("#dtBasicExample").hide(),$("#dtBasicExampleAp").hide(),$("#dtBasicExampleNew").hide(),$(".c").hide(),$(".d").hide(),$(".e").hide(),$("#dtBasicExampled").hide();var t=$("#dtBasicExampled").DataTable({processing:!0,language:{loadingRecords:"&nbsp;",processing:"<span class='loader5'></span><h4 style='color:#0066b3'>Loading...</h4>"},destroy:!0,oSearch:{bSmart:!1,bRegex:!0}});t.clear().draw(),$.ajax({async:!0,type:"GET",cors:!0,contentType:"application/json",secure:!0,crossDomain:!0,url:urlForAll+"merchant/deliveryData/basedOnDate/incomplete/"+merchant_ID,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},beforeSend:function(){document.getElementById("dtBasicExampled_processing").style.display="block"},success:function(e){dataIncom=e.data,document.getElementById("onea").innerHTML="Due From Incomplete Deliveries: "+e.data.length;$.each(e.data,(function(a,d){for(var n=Object.keys(d),o=0,c=0,r=0,s=0;s<e.data[a][n[0]].length;s++)if("Cash on Delivery"==e.data[a][n[0]][s].payment_method){parseInt(e.data[a][n[0]][s].delivery_charge);var l=parseInt(e.data[a][n[0]][s].product_cost)*parseInt(e.data[a][n[0]][s].product_qty);o+=l-l*percentage/100,c+=l,r+=l*percentage/100}var i="<tr><td>"+n[0]+"</td><td>"+e.data[a][n[0]].length+"</td><td>"+c+"</td><td>"+percentage+"%</td><td>"+r+"</td><td>"+o+'</td><td><button id="'+n[0]+'" name="'+a+'" class="btn-round btn-outline btn" onclick="show(this)">Details</button></td></tr>';t.rows.add($(i)).draw()}))},complete:function(t){document.getElementById("body").style.pointerEvents="auto",document.getElementById("dtBasicExampled_processing").style.display="none"}}),$('.dataTables_filter input[type="search"]').attr("placeholder","Search anything!").css({width:"300px",display:"inline-block",background:"white"}),$('.dataTables_filter input[type="search"]').attr("class","btn btn-round").css({width:"300px",display:"inline-block",color:"#000000",background:"#FFFFFA"}),$(".dataTables_length select").attr("class","btn btn-round").css({width:"80px","background-color":"white",color:"#000000",background:"#FFFFFA"}),$(".d").show(),$("#dtBasicExampled").show()},completeDeliveries=()=>{document.getElementById("body").style.pointerEvents="none",document.getElementById("twoa").disabled=!0,document.getElementById("onea").disabled=!1,document.getElementById("twoa").style.fontSize="14.5px",document.getElementById("onea").style.fontSize="13px",document.getElementById("onea").innerHTML="Due From Incomplete Deliveries",$("#dtBasicExample").hide(),$("#dtBasicExampleAp").hide(),$("#dtBasicExampleNew").hide(),$(".c").hide(),$(".d").hide(),$(".e").hide(),$("#dtBasicExampled").hide();var t=$("#dtBasicExampleNew").DataTable({processing:!0,language:{loadingRecords:"&nbsp;",processing:"<span class='loader5'></span><h4 style='color:#0066b3'>Loading...</h4>"},destroy:!0,oSearch:{bSmart:!1,bRegex:!0}});t.clear().draw(),$.ajax({async:!0,type:"GET",cors:!0,contentType:"application/json",secure:!0,crossDomain:!0,url:urlForAll+"merchant/deliveryData/basedOnDate/complete/"+merchant_ID,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},beforeSend:function(){document.getElementById("dtBasicExampleNew_processing").style.display="block"},success:function(e){dataCom=e.data,document.getElementById("twoa").innerHTML="Due From Completed Deliveries: "+e.data.length;$.each(e.data,(function(a,d){for(var n=Object.keys(d),o=0,c=0,r=0,s="",l=0,i=0;i<e.data[a][n[0]].length;i++)if("Cash on Delivery"==e.data[a][n[0]][i].payment_method&&1==e.data[a][n[0]][i].hasOwnProperty("transaction_complete")&&0==e.data[a][n[0]][i].transaction_complete){l>0&&(s+=", "),s+=""+e.data[a][n[0]][i].delivery_Id;parseInt(e.data[a][n[0]][i].delivery_charge);var p=parseInt(e.data[a][n[0]][i].product_cost)*parseInt(e.data[a][n[0]][i].product_qty);o+=p-p*percentage/100,c+=p,r+=p*percentage/100,l+=1}var m="<tr><td>"+n[0]+"</td><td>"+e.data[a][n[0]].length+"</td><td>"+c+"</td><td>"+percentage+"%</td><td>"+r+"</td><td>"+o+"</td><td>"+s+'</td><td><button id="'+n[0]+'" name="'+a+'" class="btn-round btn-outline btn" onclick="show2(this)">Details</button></td></tr>';t.rows.add($(m)).draw()}))},complete:function(t){document.getElementById("body").style.pointerEvents="auto",document.getElementById("dtBasicExampleNew_processing").style.display="none"}}),$('.dataTables_filter input[type="search"]').attr("placeholder","Search anything!").css({width:"300px",display:"inline-block",background:"white"}),$('.dataTables_filter input[type="search"]').attr("class","btn btn-round").css({width:"300px",display:"inline-block",color:"#000000",background:"#FFFFFA"}),$(".dataTables_length select").attr("class","btn btn-round").css({width:"80px","background-color":"white",color:"#000000",background:"#FFFFFA"}),$("#dtBasicExampleNew").show(),$(".e").show()},save=t=>{localStorage.setItem("'Accept': 'application/json'",t.id),localStorage.setItem("'Accept': 'application/jsonN'",t.name),window.open("addDeliverToDeliveryMan.html","_blank")},show=t=>{var e=t.id,a=t.name,d=$("#dtBasicExampled12").DataTable({processing:!0,destroy:!0,oSearch:{bSmart:!1,bRegex:!0}});d.clear().draw();$.each(dataIncom[a][e],(function(t,n){var o="<tr><td>"+dataIncom[a][e][t].delivery_Id+"</td><td>"+dataIncom[a][e][t].delivery_status+"</td><td>"+dataIncom[a][e][t].pickup_time+"</td><td>"+dataIncom[a][e][t].sender_name+"</td><td>"+dataIncom[a][e][t].sender_phone_number+"</td><td>"+dataIncom[a][e][t].sender_address+"</td><td>"+dataIncom[a][e][t].receiver_name+"</td><td>"+dataIncom[a][e][t].receiver_phone_number+"</td><td>"+dataIncom[a][e][t].receiver_address+"</td><td>"+dataIncom[a][e][t].product_name+"</td><td>"+dataIncom[a][e][t].product_qty+"</td><td>"+dataIncom[a][e][t].product_cost+"</td><td>"+dataIncom[a][e][t].delivery_charge+"</td><td>"+dataIncom[a][e][t].payment_method+"</td><td>"+dataIncom[a][e][t].delivery_type+"</td><td>"+dataIncom[a][e][t].delivery_note+"</td></tr>";d.rows.add($(o)).draw()})),$('.dataTables_filter input[type="search"]').attr("placeholder","Search anything!").css({width:"300px",display:"inline-block",background:"white"}),$('.dataTables_filter input[type="search"]').attr("class","btn btn-round").css({width:"300px",display:"inline-block",color:"#000000",background:"#FFFFFA"}),$(".dataTables_length select").attr("class","btn btn-round").css({width:"80px","background-color":"white",color:"#000000",background:"#FFFFFA"}),$("#myModal").modal("show")},show2=t=>{var e=t.id,a=t.name,d=$("#dtBasicExampled123").DataTable({processing:!0,destroy:!0,oSearch:{bSmart:!1,bRegex:!0}});d.clear().draw();$.each(dataCom[a][e],(function(t,n){var o="<tr><td>"+dataCom[a][e][t].delivery_Id+"</td><td>"+dataCom[a][e][t].delivery_created_date+"</td><td>"+dataCom[a][e][t].delivery_status+"</td><td>"+dataCom[a][e][t].delivery_complete_date+"</td><td>"+dataCom[a][e][t].sender_name+"</td><td>"+dataCom[a][e][t].sender_phone_number+"</td><td>"+dataCom[a][e][t].sender_address+"</td><td>"+dataCom[a][e][t].receiver_name+"</td><td>"+dataCom[a][e][t].receiver_phone_number+"</td><td>"+dataCom[a][e][t].receiver_address+"</td><td>"+dataCom[a][e][t].product_name+"</td><td>"+dataCom[a][e][t].product_qty+"</td><td>"+dataCom[a][e][t].product_cost+"</td><td>"+dataCom[a][e][t].delivery_charge+"</td><td>"+dataCom[a][e][t].payment_method+"</td><td>"+dataCom[a][e][t].delivery_type+"</td><td>"+dataCom[a][e][t].delivery_note+"</td></tr>";d.rows.add($(o)).draw()})),$('.dataTables_filter input[type="search"]').attr("placeholder","Search anything!").css({width:"300px",display:"inline-block",background:"white"}),$('.dataTables_filter input[type="search"]').attr("class","btn btn-round").css({width:"300px",display:"inline-block",color:"#000000",background:"#FFFFFA"}),$(".dataTables_length select").attr("class","btn btn-round").css({width:"80px","background-color":"white",color:"#000000",background:"#FFFFFA"}),$("#myModal12").modal("show")};