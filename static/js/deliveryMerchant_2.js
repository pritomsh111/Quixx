var dataInfo,excelData,merchant_ID=localStorage.getItem("userID"),flag=!1,createDelivery=()=>{document.getElementById("three").disabled=!0,document.getElementById("two").disabled=!1,document.getElementById("one").disabled=!1,document.getElementById("three").style.fontSize="14.5px",document.getElementById("two").style.fontSize="13px",document.getElementById("one").style.fontSize="13px",document.getElementById("one").innerHTML="Ongoing Deliveries",document.getElementById("two").innerHTML="Completed Deliveries",document.getElementById("six").innerHTML="History of On Hold Deliveries",document.getElementById("six").style.fontSize="13px",document.getElementById("six").disabled=!1,$("#dtBasicExample").hide(),$(".a").hide(),$("#dtBasicExampleAp").hide(),$("#dtBasicExampleNew").hide(),$(".b").hide(),$(".c").show(),$(".d").hide(),$(".e").hide(),$("#dtBasicExampled").hide(),$("#deliveryCreate").show()},goToDelivery=()=>{window.open("addDeliverToDeliveryMan.html","_blank")},mapxx=()=>{window.open("locationFinder.html","_blank")},ExcelToJSON=function(){this.parseExcel=function(e){var t=new FileReader;t.onload=function(e){var t=e.target.result,n=XLSX.read(t,{type:"binary"});n.SheetNames.forEach((function(e){var t=XLSX.utils.sheet_to_row_object_array(n.Sheets[e]),d=JSON.stringify(t),a=JSON.parse(d);flag=!0,excelData=a}))},t.onerror=function(e){},t.readAsBinaryString(e)}};function handleFileSelect(e){if(e.preventDefault(),"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==e.target.files[0].type){document.getElementById("fileName").innerHTML=e.target.files[0].name;var t=e.target.files;(new ExcelToJSON).parseExcel(t[0])}else document.getElementById("wrongThisUpload").innerHTML="Invalid File",$("#myModalWrongUpload").modal("show")}document.getElementById("upload").addEventListener("change",handleFileSelect,!1),document.getElementById("cancelUpload").addEventListener("click",(function(e){e.preventDefault(),document.getElementById("fileName").innerHTML="",document.getElementById("upload").value="",flag=!1}));var onGoingDeliveries=()=>{$("#onh").html(""),document.getElementById("body").style.pointerEvents="none",document.getElementById("one").disabled=!0,document.getElementById("two").disabled=!1,document.getElementById("three").disabled=!1,document.getElementById("one").style.fontSize="14.5px",document.getElementById("two").style.fontSize="13px",document.getElementById("three").style.fontSize="13px",document.getElementById("six").style.fontSize="13px",document.getElementById("six").disabled=!1,document.getElementById("two").innerHTML="Completed Deliveries",document.getElementById("six").innerHTML="History of On Hold Deliveries",$("#dtBasicExample").hide(),$(".a").hide(),$("#dtBasicExampleAp").hide(),$("#dtBasicExampleNew").hide(),$(".b").hide(),$(".c").hide(),$(".d").hide(),$(".e").hide(),$("#dtBasicExampled").hide(),$("#deliveryCreate").hide();var e=$("#dtBasicExampled").DataTable({processing:!0,language:{loadingRecords:"&nbsp;",processing:"<span class='loader5'></span><h4 style='color:#0066b3'>Loading...</h4>"},paging:!0,pageLength:100,searching:!1,ordering:!1,deferRender:!0,pagingType:"full_numbers",lengthMenu:[[100,200,300,400],[100,200,300,400]],serverSide:!0,destroy:!0,ajax:{url:urlForAll+"merchant/incompleted/delivery/details/"+merchant_ID,type:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},dataSrc:"data"},columns:[{targets:0,data:"delivery_Id"},{targets:1,data:"delivery_created_date"},{targets:2,data:"delivery_status"},{targets:5,data:"pickup_time"},{targets:7,data:"sender_name"},{targets:8,data:"sender_phone_number"},{targets:9,data:"sender_address"},{targets:10,data:"receiver_name"},{targets:11,data:"receiver_phone_number"},{targets:13,data:"receiver_address"},{targets:15,data:"product_name"},{targets:16,data:"product_qty"},{targets:17,data:"product_cost"},{targets:18,data:"delivery_charge"},{targets:19,data:"payment_method"},{targets:14,data:"delivery_type"},{targets:20,data:"delivery_note"}]});e.on("xhr",(function(){var t=e.ajax.json();document.getElementById("one").innerHTML="Ongoing Deliveries: "+t.recordsTotal,document.getElementById("two").innerHTML="Completed Deliveries",document.getElementById("six").innerHTML="History of On Hold Deliveries",document.getElementById("body").style.pointerEvents="auto"})),e.clear().draw(),$('.dataTables_filter input[type="search"]').attr("placeholder","Search anything!").css({width:"300px",display:"inline-block",background:"white"}),$('.dataTables_filter input[type="search"]').attr("class","btn btn-round").css({width:"300px",display:"inline-block",color:"#000000",background:"#FFFFFA"}),$(".dataTables_length select").attr("class","btn btn-round").css({width:"80px","background-color":"white",color:"#000000",background:"#FFFFFA"}),$(".d").show(),$("#dtBasicExampled").show()},completeDeliveries=()=>{document.getElementById("body").style.pointerEvents="none",document.getElementById("two").disabled=!0,document.getElementById("one").disabled=!1,document.getElementById("three").disabled=!1,document.getElementById("two").style.fontSize="14.5px",document.getElementById("one").style.fontSize="13px",document.getElementById("three").style.fontSize="13px",document.getElementById("six").style.fontSize="13px",document.getElementById("six").disabled=!1,document.getElementById("one").innerHTML="Ongoing Deliveries",document.getElementById("six").innerHTML="History of On Hold Deliveries",$("#dtBasicExample").hide(),$(".a").hide(),$("#dtBasicExampleAp").hide(),$("#dtBasicExampleNew").hide(),$(".b").hide(),$(".c").hide(),$(".d").hide(),$(".e").hide(),$("#dtBasicExampled").hide(),$("#deliveryCreate").hide();var e=$("#dtBasicExampleNew").DataTable({processing:!0,language:{loadingRecords:"&nbsp;",processing:"<span class='loader5'></span><h4 style='color:#0066b3'>Loading...</h4>"},paging:!0,pageLength:100,searching:!1,ordering:!1,deferRender:!0,pagingType:"full_numbers",lengthMenu:[[100,200,300,400],[100,200,300,400]],serverSide:!0,destroy:!0,ajax:{url:urlForAll+"merchant/completed/delivery/details/"+merchant_ID,type:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},dataSrc:"data"},columns:[{targets:0,data:"delivery_Id"},{targets:1,data:"delivery_created_date"},{targets:2,data:"delivery_status"},{targets:5,data:"delivery_complete_date"},{targets:7,data:"sender_name"},{targets:8,data:"sender_phone_number"},{targets:9,data:"sender_address"},{targets:10,data:"receiver_name"},{targets:11,data:"receiver_phone_number"},{targets:13,data:"receiver_address"},{targets:15,data:"product_name"},{targets:16,data:"product_qty"},{targets:17,data:"product_cost"},{targets:18,data:"delivery_charge"},{targets:19,data:"payment_method"},{targets:14,data:"delivery_type"},{targets:20,data:"delivery_note"}]});e.on("xhr",(function(){var t=e.ajax.json();document.getElementById("two").innerHTML="Completed Deliveries: "+t.recordsTotal,document.getElementById("six").innerHTML="History of On Hold Deliveries",document.getElementById("one").innerHTML="Ongoing Deliveries",document.getElementById("body").style.pointerEvents="auto"})),e.clear().draw(),$('.dataTables_filter input[type="search"]').attr("placeholder","Search anything!").css({width:"300px",display:"inline-block",background:"white"}),$('.dataTables_filter input[type="search"]').attr("class","btn btn-round").css({width:"300px",display:"inline-block",color:"#000000",background:"#FFFFFA"}),$(".dataTables_length select").attr("class","btn btn-round").css({width:"80px","background-color":"white",color:"#000000",background:"#FFFFFA"}),$("#dtBasicExampleNew").show(),$(".e").show()},onHoldDeliveries=()=>{$("#onh").html("This table will let you know which of your deliveries were On-Hold!"),document.getElementById("body").style.pointerEvents="none",document.getElementById("one").disabled=!1,document.getElementById("two").disabled=!1,document.getElementById("three").disabled=!1,document.getElementById("one").style.fontSize="13px",document.getElementById("two").style.fontSize="13px",document.getElementById("three").style.fontSize="13px",document.getElementById("six").style.fontSize="14.5px",document.getElementById("six").disabled=!0,document.getElementById("one").innerHTML="Ongoing Deliveries",document.getElementById("two").innerHTML="Completed Deliveries",$("#dtBasicExample").hide(),$(".a").hide(),$("#dtBasicExampleAp").hide(),$("#dtBasicExampleNew").hide(),$(".b").hide(),$(".c").hide(),$(".d").hide(),$(".e").hide(),$("#dtBasicExampled").hide(),$("#deliveryCreate").hide();var e=$("#dtBasicExampled").DataTable({processing:!0,language:{loadingRecords:"&nbsp;",processing:"<span class='loader5'></span><h4 style='color:#0066b3'>Loading...</h4>"},paging:!0,pageLength:100,searching:!1,ordering:!1,deferRender:!0,pagingType:"full_numbers",lengthMenu:[[100,200,300,400],[100,200,300,400]],serverSide:!0,destroy:!0,ajax:{url:urlForAll+"delivery/onHold/"+merchant_ID,type:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},dataSrc:"data"},columns:[{targets:0,data:"delivery_Id"},{targets:1,data:"delivery_created_date"},{targets:2,data:"delivery_status"},{targets:5,data:"pickup_time"},{targets:7,data:"sender_name"},{targets:8,data:"sender_phone_number"},{targets:9,data:"sender_address"},{targets:10,data:"receiver_name"},{targets:11,data:"receiver_phone_number"},{targets:13,data:"receiver_address"},{targets:15,data:"product_name"},{targets:16,data:"product_qty"},{targets:17,data:"product_cost"},{targets:18,data:"delivery_charge"},{targets:19,data:"payment_method"},{targets:14,data:"delivery_type"},{targets:20,data:"delivery_note"}]});e.on("xhr",(function(){var t=e.ajax.json();document.getElementById("six").innerHTML="History of On Hold Deliveries: "+t.recordsTotal,document.getElementById("two").innerHTML="Completed Deliveries",document.getElementById("one").innerHTML="Ongoing Deliveries",document.getElementById("body").style.pointerEvents="auto"})),e.clear().draw(),$('.dataTables_filter input[type="search"]').attr("placeholder","Search anything!").css({width:"300px",display:"inline-block",background:"white"}),$('.dataTables_filter input[type="search"]').attr("class","btn btn-round").css({width:"300px",display:"inline-block",color:"#000000",background:"#FFFFFA"}),$(".dataTables_length select").attr("class","btn btn-round").css({width:"80px","background-color":"white",color:"#000000",background:"#FFFFFA"}),$(".d").show(),$("#dtBasicExampled").show()},save=e=>{localStorage.setItem("'Accept': 'application/json'",e.id),localStorage.setItem("'Accept': 'application/jsonN'",e.name),window.open("addDeliverToDeliveryMan.html","_blank")};function recall(){document.getElementById("r_name").value="",document.getElementById("r_number").value="",document.getElementById("pac-input2").value="",document.getElementById("rec_address").value="",document.getElementById("DELIVERY_NOTE").value="",document.getElementById("product_cost").value="",document.getElementById("des_lat").value="",document.getElementById("des_longi").value="",document.getElementById("product_name").value="",document.getElementById("product_qty").value="",$.ajax({async:!0,type:"GET",url:urlForAll+"profile/get/profile/"+localStorage.getItem("userID"),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(e){document.getElementById("pac-input").value=e.data.sender_address,document.getElementById("s_name").value=e.data.sender_name,document.getElementById("s_number").value=e.data.sender_phone_number,document.getElementById("lat").value=e.data.sender_lat,document.getElementById("longi").value=e.data.sender_longi}})}$("#managers2").change((function(){"Cash on Delivery"==$(this).val()?$("#cod").show():$("#cod").hide()})),document.getElementById("createDelivery").addEventListener("click",(function(e){var t,n=document.getElementById("timepicker-12-hr").value,d=document.getElementById("s_name").value,a=document.getElementById("s_number").value,l=document.getElementById("pac-input").value,r=document.getElementById("r_name").value,o=document.getElementById("r_number").value,i=document.getElementById("pac-input2").value,m=document.getElementById("rec_address").value,s=document.getElementById("managers2").value,c=document.getElementById("DELIVERY_NOTE").value,u=document.getElementById("deliveryType").value,y=String(document.getElementById("managers").value),g=String(document.getElementById("lat").value),h=String(document.getElementById("longi").value),v=String(document.getElementById("des_lat").value),p=String(document.getElementById("des_longi").value),E=String(document.getElementById("product_name").value),D=String(document.getElementById("product_qty").value),I=document.getElementById("product_cost").value;1==(""==n||null==n?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Please give a Pickup Time!",$("#myModalWrongDeliveryCreate").modal("show"),0):1)&&1==(""==d||null==d?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Sender Name cannot be empty!",$("#myModalWrongDeliveryCreate").modal("show"),0):1)&&1==(""==a||null==a?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Sender's Phone Number cannot be empty!",$("#myModalWrongDeliveryCreate").modal("show"),0):(a.length<11||a.length>11)&&1==!/\D/.test(a)?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Sender's Phone Number must be of 11 digits!",$("#myModalWrongDeliveryCreate").modal("show"),0):11===a.match(/\d/g).length&&1==!/\D/.test(a)?1:(document.getElementById("wrongThisDeliveryCreate").innerHTML="Sender's Phone Number not valid!",$("#myModalWrongDeliveryCreate").modal("show"),0))&&1==(""==r||null==r?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Receiver's Name cannot be empty!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("r_name").focus(),0):1)&&1==(""==o||null==o?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Receiver's Phone Number cannot be empty!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("r_number").focus(),0):(o.length<11||o.length>11)&&1==!/\D/.test(o)?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Receiver's Phone Number must be of 11 digits!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("r_number").focus(),0):11===o.match(/\d/g).length&&1==!/\D/.test(o)?1:(document.getElementById("wrongThisDeliveryCreate").innerHTML="Receiver's Phone Number not valid!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("r_number").focus(),0))&&1==(""==E||null==E?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Product Name cannot be empty!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("product_name").focus(),0):1)&&1==(parseInt(D)<=0||0==D.charAt(0)?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Product Quantity must be greater than 0!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("product_qty").focus(),0):1==isNaN(D)||""==D||0==!/\D/.test(D)?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Product Quantity must be a number!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("product_qty").focus(),0):1==!/\D/.test(D)?1:void 0)&&1==(parseInt(I)<=0||0==I.charAt(0)?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Product Cost must be greater than 0!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("product_cost").focus(),0):1==isNaN(I)||""==I||0==!/\D/.test(I)?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Product Cost must be a number!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("product_cost").focus(),0):1==!/\D/.test(I)?1:void 0)&&1==(""==l||null==l?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Sender's Address cannot be empty!!",$("#myModalWrongDeliveryCreate").modal("show"),0):1)&&1==(""==m||null==m?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Please give Receiver's Address!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("rec_address").focus(),0):1)&&1==(""==i||null==i?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Receiver's Address cannot be empty on map!!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("pac-input2").focus(),0):1)&&1==(""==v||""==p?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Please select Receiver's Address on map!",$("#myModalWrongDeliveryCreate").modal("show"),0):1)&&(document.getElementById("createDelivery").disabled=!0,$(".circle-loader").show(),t=JSON.stringify({delivery_status:"",delivery_type:u,sender_address:l,receiver_address:m,sender_phone_number:a,receiver_phone_number:o,sender_name:d,receiver_name:r,payment_method:s,product_cost:I,sender_lat:g,sender_longi:h,receiver_lat:v,receiver_longi:p,product_name:E,product_qty:D,pickup_time:n,delivery_note:c,delivery_area:y}),$.ajax({type:"POST",url:urlForAll+"delivery/create/"+merchant_ID+"/no",data:t,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(e){$("#tickD2").hide(),$(".circle-loader").removeClass("load-complete"),$("#sureD2").html(""),$("#myModalCreateD1").modal("show"),$("#sureD2").html("Please wait!"),"OK"==e.status&&(setTimeout((function(){$(".circle-loader").addClass("load-complete"),$("#tickD2").show(),$("#sureD2").html(`Delivery ID: ${e.data.delivery_Id} added! A message will be sent to your phone!`)}),1e3),setTimeout((function(){document.getElementById("createDelivery").disabled=!1,$("#myModalCreateD1").modal("hide")}),4500),document.getElementById("timepicker-12-hr").value=n,recall())},error:function(e){document.getElementById("createDelivery").disabled=!1;var t=Object.keys(e);return $("#myModalCreateD1").modal("show"),"responseJSON"==t[17]?($(".circle-loader").hide(),$("#sureD2").html(""),$("#sureD2ZZ").html(""),void(divElement.innerHTML+="Oops! Looks like you are not able to create delivery!<br>Please Contact Your Organization!<br>")):($(".circle-loader").hide(),$("#sureD2").html(""),$("#sureD2ZZ").html(""),void(divElement.innerHTML+="Something went wrong!<br>Please Wait A Bit?<br>"))}}))}));var hello=()=>{document.getElementById("body").style.pointerEvents="auto"},divElement=document.getElementById("sureD2Z"),keysx=[],extrax1=[],extrax2=[],deliveryList=[],assignedDeliveryMan=[],assignedDeliveryManPhone=[];function doIt(e,t){setTimeout((function(){var n,d=excelData[e].Pickup_Time,a=excelData[e].Delivery_Type,l=excelData[e].Sender_Name,r=excelData[e].Sender_Phone_Number,o=excelData[e].Sender_Address,i=excelData[e].Sender_Lattitude,m=excelData[e].Sender_Longitude,s=excelData[e].Receiver_Name,c=excelData[e].Receiver_Phone_Number,u=excelData[e].Receiver_Area,y=excelData[e].Receiver_Address,g=excelData[e].Receiver_Lattitude,h=excelData[e].Receiver_Longitude,v=excelData[e].Payment_Method,p=excelData[e].Product_Name,E=excelData[e].Product_Quantity_Pieces,D=excelData[e].Product_Cost,I=excelData[e].Delivery_Charge,B=excelData[e].Delivery_Note;1==(""==d||null==d||null==d?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Please give a Pickup Time!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1)&&1==(""==l||null==l||null==l?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Sender Name cannot be empty!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1)&&1==(""==r||null==r||null==r?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Sender's Phone Number cannot be empty!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):(r.length<11||r.length>11)&&1==!/\D/.test(r)?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Sender's Phone Number must be of 11 digits!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):11===r.match(/\d/g).length&&1==!/\D/.test(r)?1:(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Sender's Phone Number not valid!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0))&&1==(""==s||null==s||null==s?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Receiver's Name cannot be empty!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1)&&1==(""==c||null==c||null==c?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Receiver's Phone Number cannot be empty!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):(c.length<11||c.length>11)&&1==!/\D/.test(c)?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Receiver's Phone Number must be of 11 digits!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):11===c.match(/\d/g).length&&1==!/\D/.test(c)?1:(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Receiver's Phone Number not valid!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0))&&1==(""==p||null==p||null==p?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Product Name cannot be empty!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1)&&1==(parseInt(E)<=0||0==String(E).charAt(0)?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Product Quantity must be greater than 0!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1==isNaN(E)||""==E||null==E||0==!/\D/.test(E)?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Product Quantity must be a number!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1==!/\D/.test(E)?1:void 0)&&1==(parseInt(D)<=0||0==String(D).charAt(0)?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Product Cost must be greater than 0!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1==isNaN(D)||""==D||null==D||0==!/\D/.test(D)?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Product Cost must be a number!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1==!/\D/.test(D)?1:void 0)&&1==(parseInt(I)<=0||0==String(I).charAt(0)?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Delivery Charge must be greater than 0!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1==isNaN(I)||""==I||null==I||0==!/\D/.test(I)?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Delivery Charge must be a number!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1==!/\D/.test(I)?1:void 0)&&1==(""==o||null==o||null==o?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Sender's Address cannot be empty!!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1)&&1==(""==u||null==u||null==u?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Receiver's Area cannot be empty!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1)&&1==(""==y||null==y||null==y?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Please give Receiver's Address!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1)&&1==(""==i||""==m||null==i||null==m?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Please give Sender's Lattitude/Longitude!!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1)&&1==(""==g||""==h||null==h||null==g?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Please give Receiver's Lattitude/Longitude!!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1)&&(null==B&&(B=""),n=JSON.stringify({delivery_status:"",delivery_type:a,sender_address:o,receiver_address:y,sender_phone_number:r,receiver_phone_number:c,sender_name:l,receiver_name:s,payment_method:v,delivery_charge:I,product_cost:D,sender_lat:i,sender_longi:m,receiver_lat:g,receiver_longi:h,product_name:p,product_qty:E,pickup_time:d,delivery_note:B,delivery_area:u}),$.ajax({async:!0,type:"POST",url:urlForAll+"delivery/create/"+merchant_ID+"/no",data:n,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(n){document.getElementById("sureD2ZZ").innerHTML=0==e?`<br>${e+1} Delivery Created!<br>`:`<br>${e+1} Deliveries Created!<br>`,keysx[e]=Object.keys(n.data),extrax1[e]=n.data,deliveryList[e]=n.data.delivery_Id;var d="";d+=`Delivery ID: ${deliveryList[e]} Created<br>`,divElement.innerHTML+=d,"OK"==n.status&&(e==t-1?(setTimeout((function(){$("#sureD2").html(e+1+" Deliveries Created!"),$(".circle-loader").addClass("load-complete"),$("#tickD2").show(),document.getElementById("sureD2ZZ").innerHTML=""}),1e3),setTimeout((function(){document.getElementById("createDeliverywithExcel").disabled=!1}),3e3),document.getElementById("CLOSEIT").disabled=!1,document.getElementById("body").style.pointerEvents="auto",hello()):doIt(++e,t))},error:function(e){return document.getElementById("body").style.pointerEvents="auto",document.getElementById("createDeliverywithExcel").disabled=!1,document.getElementById("CLOSEIT").disabled=!1,"responseJSON"==Object.keys(e)[17]?($(".circle-loader").hide(),$("#sureD2").html(""),$("#sureD2ZZ").html(""),void(divElement.innerHTML+="Oops! Looks like you are not able to create delivery!<br>Please Contact Your Organization!<br>")):($(".circle-loader").hide(),$("#sureD2").html(""),$("#sureD2ZZ").html(""),void(divElement.innerHTML+="Something went wrong!<br>Please Wait A Bit?<br>"))}}))}),100)}document.getElementById("createDeliverywithExcel").addEventListener("click",(function(e){if(1==flag){$("#tickD2").hide(),$(".circle-loader").show(),$(".circle-loader").removeClass("load-complete"),$("#sureD2").html(""),$("#myModalCreateD1").modal("show"),$("#sureD2").html("Please wait!"),$("#sureD2Z").html(""),document.getElementById("CLOSEIT").disabled=!0;var t=excelData.length;setTimeout((function(){doIt(0,t)}),1e3)}else document.getElementById("wrongThisUpload2").innerHTML="Please Upload An Excel File!",$("#myModalWrongUpload2").modal("show")}));