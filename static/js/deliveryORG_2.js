var dataInfo,excelData,org_ID=localStorage.getItem("userID"),flag=!1,this_select_content="",createDelivery=()=>{document.getElementById("threeb").disabled=!0,document.getElementById("twob").disabled=!1,document.getElementById("oneb").disabled=!1,document.getElementById("threeb").style.fontSize="14.5px",document.getElementById("twob").style.fontSize="13px",document.getElementById("oneb").style.fontSize="13px",document.getElementById("sixb").disabled=!1,document.getElementById("sevenb").disabled=!1,document.getElementById("eightb").disabled=!1,document.getElementById("sixb").style.fontSize="13px",document.getElementById("sevenb").style.fontSize="13px",document.getElementById("eightb").style.fontSize="13px",document.getElementById("twob").innerHTML="Assigned Deliveries",document.getElementById("oneb").innerHTML="Unassigned Deliveries",document.getElementById("sixb").innerHTML="History of On Hold Deliveries",document.getElementById("sevenb").innerHTML="Ongoing Deliveries",document.getElementById("eightb").innerHTML="Completed Deliveries",document.getElementById("nineb").disabled=!1,document.getElementById("nineb").style.fontSize="13px",document.getElementById("nineb").innerHTML="Canceled Deliveries",document.getElementById("tenb").disabled=!1,document.getElementById("tenb").style.fontSize="13px",document.getElementById("tenb").innerHTML="Returned Deliveries",$("#dtBasicExample").hide(),$(".a").hide(),$("#dtBasicExampleAp").hide(),$("#dtBasicExampleNew").hide(),$(".b").hide(),$(".c").show(),$(".d").hide(),$(".e").hide(),$("#dtBasicExampled").hide(),$("#dtBasicExampleNewf").hide(),$("#dtBasicExampleNewg").hide(),$("#dtBasicExampleNewh").hide(),$(".f").hide(),$(".g").hide(),$(".h").hide(),$("#dtBasicExampleNewi").hide(),$(".i").hide(),$("#dtBasicExampleNewj").hide(),$(".j").hide(),$("#deliveryCreate").show()},goToDelivery=()=>{window.open("addDeliverToDeliveryMan.html","_blank")},ExcelToJSON=function(){this.parseExcel=function(e){var t=new FileReader;t.onload=function(e){var t=e.target.result,n=XLSX.read(t,{type:"binary"});n.SheetNames.forEach((function(e){var t=XLSX.utils.sheet_to_row_object_array(n.Sheets[e]),d=JSON.stringify(t),a=JSON.parse(d);flag=!0,excelData=a}))},t.onerror=function(e){},t.readAsBinaryString(e)}};function handleFileSelect(e){if(e.preventDefault(),"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==e.target.files[0].type){document.getElementById("fileName").innerHTML=e.target.files[0].name;var t=e.target.files;(new ExcelToJSON).parseExcel(t[0])}else document.getElementById("wrongThisUpload").innerHTML="Invalid File",$("#myModalWrongUpload").modal("show")}document.getElementById("upload").addEventListener("change",handleFileSelect,!1),document.getElementById("cancelUpload").addEventListener("click",(function(e){e.preventDefault(),document.getElementById("fileName").innerHTML="",document.getElementById("upload").value="",flag=!1})),$("#senderListExcel").change((function(){var e=$(this).val();e?$.ajax({async:!0,type:"GET",url:urlForAll+"profile/get/profile/"+e,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(e){"OK"==e.status&&(document.getElementById("senderInfo").innerHTML="Sender's Information For Excel:",document.getElementById("senLatLong").innerHTML=`Sender's Address: ${e.data.sender_address}<br>\n\t\t\t\t\tSender's Name: ${e.data.sender_name}<br>\n\t\t\t\t\tSender's Phone Number: ${e.data.sender_phone_number}<br>\n\t\t\t\t\tSender's Lattitude: ${e.data.sender_lat}<br>\n\t\t\t\t\tSender's Longitude: ${e.data.sender_longi}<br>`)},error:function(e,t,n){$("#myModal2").modal("show")}}):(document.getElementById("senLatLong").innerHTML="",document.getElementById("senderInfo").innerHTML="")})),$("#senderList").change((function(){var e=$(this).val();if(e)$.ajax({async:!0,type:"GET",url:urlForAll+"profile/get/profile/"+e,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(e){if("OK"==e.status){var t=new google.maps.Map(document.getElementById("map"),{center:{lat:parseFloat(e.data.sender_lat),lng:parseFloat(e.data.sender_longi)},zoom:13,mapTypeId:"roadmap",mapTypeControl:!1,fullscreenControl:!1});new google.maps.Marker({position:{lat:parseFloat(e.data.sender_lat),lng:parseFloat(e.data.sender_longi)},map:t});document.getElementById("pac-input").value=e.data.sender_address,document.getElementById("s_name").value=e.data.sender_name,document.getElementById("s_number").value=e.data.sender_phone_number,document.getElementById("lat").value=e.data.sender_lat,document.getElementById("longi").value=e.data.sender_longi,e.data.per_delivery_cost>0?(document.getElementById("delivery_charge").value=e.data.per_delivery_cost,document.getElementById("D_charge").innerHTML="Delivery Charge [BDT]: (This is Merchant's delivery charge. It can be modified)"):($("#delivery_charge").attr("placeholder","1000"),document.getElementById("delivery_charge").value="",document.getElementById("D_charge").innerHTML="Delivery Charge [BDT]:")}},error:function(e,t,n){$("#myModal2").modal("show")}});else{new google.maps.Map(document.getElementById("map"),{center:{lat:0,lng:0},zoom:10,mapTypeId:"roadmap",mapTypeControl:!1,fullscreenControl:!1});document.getElementById("pac-input").value="",document.getElementById("s_name").value="",document.getElementById("s_number").value="",document.getElementById("lat").value="",document.getElementById("longi").value="",$("#delivery_charge").attr("placeholder","1000"),document.getElementById("delivery_charge").value="",document.getElementById("D_charge").innerHTML="Delivery Charge [BDT]:"}}));var orgid,deliveryManId,$t,tablexxx,unassignedDeliveries=()=>{document.getElementById("body").style.pointerEvents="none",document.getElementById("oneb").disabled=!0,document.getElementById("twob").disabled=!1,document.getElementById("threeb").disabled=!1,document.getElementById("oneb").style.fontSize="14.5px",document.getElementById("twob").style.fontSize="13px",document.getElementById("threeb").style.fontSize="13px",document.getElementById("sixb").disabled=!1,document.getElementById("sevenb").disabled=!1,document.getElementById("eightb").disabled=!1,document.getElementById("sixb").style.fontSize="13px",document.getElementById("sevenb").style.fontSize="13px",document.getElementById("eightb").style.fontSize="13px",document.getElementById("nineb").disabled=!1,document.getElementById("nineb").style.fontSize="13px",document.getElementById("tenb").disabled=!1,document.getElementById("tenb").style.fontSize="13px",document.getElementById("tenb").innerHTML="Returned Deliveries",$("#dtBasicExampleNewj").hide(),$(".j").hide(),this_select_content="",document.getElementById("twob").innerHTML="Assigned Deliveries",document.getElementById("sixb").innerHTML="History of On Hold Deliveries",document.getElementById("sevenb").innerHTML="Ongoing Deliveries",document.getElementById("eightb").innerHTML="Completed Deliveries",document.getElementById("nineb").innerHTML="Canceled Deliveries",$("#dtBasicExampleNewj").hide(),$(".j").hide(),$("#dtBasicExample").hide(),$(".a").hide(),$("#dtBasicExampleAp").hide(),$("#dtBasicExampleNew").hide(),$(".b").hide(),$(".c").hide(),$(".d").hide(),$(".e").hide(),$("#dtBasicExampled").hide(),$("#deliveryCreate").hide(),$("#dtBasicExampleNewf").hide(),$("#dtBasicExampleNewg").hide(),$("#dtBasicExampleNewh").hide(),$(".f").hide(),$(".g").hide(),$(".h").hide(),$("#dtBasicExampleNewi").hide(),$(".i").hide(),$.ajax({url:urlForAll+"deliveryMan/approved/"+org_ID,type:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(e){$("#deliveryManList").empty().append('<option selected="selected" value="">Delivery Man List</option>');for(var t=0;t<e.data.length;t++){var n=new Option(e.data[t].delivery_man_id,e.data[t].delivery_man_id);$(n).html(e.data[t].name),$("#deliveryManList").append(n),this_select_content+='<option value="'+e.data[t].delivery_man_id+'">'+e.data[t].name+"</option>"}}});var e=$("#dtBasicExampled").DataTable({processing:!0,language:{loadingRecords:"&nbsp;",processing:"<div class='loader5'></div><h4 style='color:#0066b3'>Loading...</h4>"},paging:!0,pageLength:100,searching:!1,ordering:!1,deferRender:!0,pagingType:"full_numbers",lengthMenu:[[100,200,300,400],[100,200,300,400]],serverSide:!0,destroy:!0,ajax:{url:urlForAll+"manager/all/unAssign/delivery/"+org_ID,type:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},dataSrc:"data"},columns:[{targets:0,data:"delivery_Id"},{targets:1,data:"delivery_created_date"},{targets:3,data:"delivery_created_by_name"},{targets:4,data:"delivery_created_by_role"},{targets:2,data:"pickup_time"},{targets:7,data:"sender_name"},{targets:8,data:"sender_phone_number"},{targets:9,data:"sender_address"},{targets:10,data:"receiver_name"},{targets:11,data:"receiver_phone_number"},{targets:12,data:"delivery_area"},{targets:13,data:"receiver_address"},{targets:14,data:"delivery_type"},{targets:15,data:"product_name"},{targets:16,data:"product_qty"},{targets:17,data:"product_cost"},{targets:18,data:"delivery_charge"},{targets:19,data:"payment_method"},{targets:23,data:"delivery_note"},{targets:20,data:"assign",render:function(e,t,n){return'<button id="'+n.delivery_Id+'" class="btn-round btn-outline btn assignIt" style="font-size:14.5px">Assign</button>'}},{targets:21,data:"update",render:function(e,t,n){return'<button id="'+n.delivery_Id+"$$"+n.creator_id+"$$"+n.delivery_charge+"$$"+n.pickup_time+"$$"+n.receiver_name+"$$"+n.receiver_phone_number+"$$"+n.product_name+"$$"+n.product_qty+"$$"+n.payment_method+"$$"+n.product_cost+"$$"+n.delivery_note+"$$"+n.delivery_area+"$$"+n.receiver_address+"$$"+n.receiver_lat+"$$"+n.receiver_longi+"$$"+n.sender_name+"$$"+n.sender_phone_number+"$$"+n.sender_address+"$$"+n.delivery_type+"$$"+n.sender_lat+"$$"+n.sender_longi+"$$"+n.delivery_created_date+"$$"+n.delivery_created_by_name+"$$"+n.delivery_created_by_role+"$$"+n.collection_name+"$$"+n.delivery_status+'" class="btn-round btn-outline btn updateCh" style="font-size:14.5px">Update Delivery</button>'}},{targets:22,data:"invoice",render:function(e,t,n){return'<button id="'+org_ID+'" name="'+n.delivery_Id+'" class="btn-round btn-outline btn" onclick="invoiceUnass(this)">Invoice</button>'}}]});e.on("xhr",(function(){var t=e.ajax.json();document.getElementById("oneb").innerHTML="Unassigned Deliveries: "+t.recordsTotal,document.getElementById("body").style.pointerEvents="auto"})),e.clear().draw(),$('.dataTables_filter input[type="search"]').attr("placeholder","Search anything!").css({width:"300px",display:"inline-block",background:"white"}),$('.dataTables_filter input[type="search"]').attr("class","btn btn-round").css({width:"300px",display:"inline-block",color:"#000000",background:"#FFFFFA"}),$(".dataTables_length select").attr("class","btn btn-round").css({width:"80px","background-color":"white",color:"#000000",background:"#FFFFFA"}),$(".d").show(),$("#dtBasicExampled").show()},assignedDeliveries=()=>{document.getElementById("body").style.pointerEvents="none",document.getElementById("twob").disabled=!0,document.getElementById("oneb").disabled=!1,document.getElementById("threeb").disabled=!1,document.getElementById("twob").style.fontSize="14.5px",document.getElementById("oneb").style.fontSize="13px",document.getElementById("threeb").style.fontSize="13px",document.getElementById("sixb").disabled=!1,document.getElementById("sevenb").disabled=!1,document.getElementById("eightb").disabled=!1,document.getElementById("sixb").style.fontSize="13px",document.getElementById("sevenb").style.fontSize="13px",document.getElementById("eightb").style.fontSize="13px",document.getElementById("nineb").disabled=!1,document.getElementById("nineb").style.fontSize="13px",document.getElementById("oneb").innerHTML="Unassigned Deliveries",document.getElementById("sixb").innerHTML="History of On Hold Deliveries",document.getElementById("sevenb").innerHTML="Ongoing Deliveries",document.getElementById("eightb").innerHTML="Completed Deliveries",document.getElementById("nineb").innerHTML="Canceled Deliveries",document.getElementById("tenb").disabled=!1,document.getElementById("tenb").style.fontSize="13px",document.getElementById("tenb").innerHTML="Returned Deliveries",$("#dtBasicExampleNewj").hide(),$(".j").hide(),$("#dtBasicExample").hide(),$(".a").hide(),$("#dtBasicExampleAp").hide(),$("#dtBasicExampleNew").hide(),$(".b").hide(),$(".c").hide(),$(".d").hide(),$(".e").hide(),$("#dtBasicExampled").hide(),$("#deliveryCreate").hide(),$("#dtBasicExampleNewf").hide(),$("#dtBasicExampleNewg").hide(),$("#dtBasicExampleNewh").hide(),$(".f").hide(),$(".g").hide(),$(".h").hide(),$("#dtBasicExampleNewi").hide(),$(".i").hide();var e=$("#dtBasicExampleNew").DataTable({processing:!0,language:{loadingRecords:"&nbsp;",processing:"<div class='loader5'></div><h4 style='color:#0066b3'>Loading...</h4>"},paging:!0,pageLength:100,searching:!1,ordering:!1,deferRender:!0,pagingType:"full_numbers",lengthMenu:[[100,200,300,400],[100,200,300,400]],serverSide:!0,destroy:!0,ajax:{url:urlForAll+"delivery/assigned/"+org_ID,type:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},dataSrc:"data"},columns:[{targets:0,data:"delivery_Id"},{targets:1,data:"delivery_created_date"},{targets:2,data:"delivery_status"},{targets:3,data:"delivery_created_by_name"},{targets:4,data:"delivery_created_by_role"},{targets:5,data:"assign_delivery_man_name"},{targets:6,data:"assign_delivery_man_phone"},{targets:7,data:"sender_name"},{targets:8,data:"sender_phone_number"},{targets:9,data:"sender_address"},{targets:10,data:"receiver_name"},{targets:11,data:"receiver_phone_number"},{targets:12,data:"delivery_area"},{targets:13,data:"receiver_address"},{targets:14,data:"delivery_type"},{targets:15,data:"product_name"},{targets:16,data:"product_qty"},{targets:17,data:"product_cost"},{targets:18,data:"delivery_charge"},{targets:19,data:"payment_method"},{targets:20,data:"invoice",render:function(e,t,n){return'<button id="'+org_ID+'" name="'+n.delivery_Id+'" class="btn-round btn-outline btn" onclick="invoice(this)" style="font-size:14.5px">Invoice</button>'}},{targets:21,data:"re-assign",render:function(e,t,n){return'<button id="'+n.delivery_Id+'" class="btn-round btn-outline btn reassignIt" style="font-size:14.5px">Re-Assign</button>'}}]});e.on("xhr",(function(){var t=e.ajax.json();document.getElementById("body").style.pointerEvents="auto",document.getElementById("twob").innerHTML="Assigned Deliveries: "+t.recordsTotal})),e.clear().draw(),$('.dataTables_filter input[type="search"]').attr("placeholder","Search anything!").css({width:"300px",display:"inline-block",background:"white"}),$('.dataTables_filter input[type="search"]').attr("class","btn btn-round").css({width:"300px",display:"inline-block",color:"#000000",background:"#FFFFFA"}),$(".dataTables_length select").attr("class","btn btn-round").css({width:"80px","background-color":"white",color:"#000000",background:"#FFFFFA"}),$("#dtBasicExampleNew").show(),$(".e").show()},onHoldDeliveries=()=>{document.getElementById("body").style.pointerEvents="none",document.getElementById("twob").disabled=!1,document.getElementById("oneb").disabled=!1,document.getElementById("threeb").disabled=!1,document.getElementById("twob").style.fontSize="13px",document.getElementById("oneb").style.fontSize="13px",document.getElementById("threeb").style.fontSize="13px",document.getElementById("sixb").disabled=!0,document.getElementById("sevenb").disabled=!1,document.getElementById("eightb").disabled=!1,document.getElementById("sixb").style.fontSize="14.5px",document.getElementById("sevenb").style.fontSize="13px",document.getElementById("eightb").style.fontSize="13px",document.getElementById("nineb").disabled=!1,document.getElementById("nineb").style.fontSize="13px",document.getElementById("sevenb").innerHTML="Ongoing Deliveries",document.getElementById("eightb").innerHTML="Completed Deliveries",document.getElementById("twob").innerHTML="Assigned Deliveries",document.getElementById("oneb").innerHTML="Unassigned Deliveries",document.getElementById("nineb").innerHTML="Canceled Deliveries",document.getElementById("tenb").disabled=!1,document.getElementById("tenb").style.fontSize="13px",document.getElementById("tenb").innerHTML="Returned Deliveries",$("#dtBasicExampleNewj").hide(),$(".j").hide(),$("#dtBasicExample").hide(),$(".a").hide(),$("#dtBasicExampleAp").hide(),$("#dtBasicExampleNew").hide(),$(".b").hide(),$(".c").hide(),$(".d").hide(),$(".e").hide(),$("#dtBasicExampled").hide(),$("#deliveryCreate").hide(),$("#dtBasicExampleNewf").hide(),$("#dtBasicExampleNewg").hide(),$("#dtBasicExampleNewh").hide(),$(".f").hide(),$(".g").hide(),$(".h").hide(),$("#dtBasicExampleNewi").hide(),$(".i").hide();var e=$("#dtBasicExampleNewf").DataTable({processing:!0,language:{loadingRecords:"&nbsp;",processing:"<div class='loader5'></div><h4 style='color:#0066b3'>Loading...</h4>"},paging:!0,pageLength:100,searching:!1,ordering:!1,deferRender:!0,pagingType:"full_numbers",lengthMenu:[[100,200,300,400],[100,200,300,400]],serverSide:!0,destroy:!0,ajax:{url:urlForAll+"delivery/onHold/"+org_ID,type:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},dataSrc:"data"},columns:[{targets:0,data:"delivery_Id"},{targets:1,data:"delivery_created_date"},{targets:2,data:"delivery_status"},{targets:3,data:"delivery_created_by_name"},{targets:4,data:"delivery_created_by_role"},{targets:5,data:"assign_delivery_man_name"},{targets:6,data:"assign_delivery_man_phone"},{targets:7,data:"sender_name"},{targets:8,data:"sender_phone_number"},{targets:9,data:"sender_address"},{targets:10,data:"receiver_name"},{targets:11,data:"receiver_phone_number"},{targets:12,data:"delivery_area"},{targets:13,data:"receiver_address"},{targets:14,data:"delivery_type"},{targets:15,data:"product_name"},{targets:16,data:"product_qty"},{targets:17,data:"product_cost"},{targets:18,data:"delivery_charge"},{targets:19,data:"payment_method"},{targets:20,data:"delivery_note"}]});e.on("xhr",(function(){var t=e.ajax.json();document.getElementById("sixb").innerHTML="History of On Hold Deliveries: "+t.recordsTotal,document.getElementById("body").style.pointerEvents="auto"})),e.clear().draw(),$('.dataTables_filter input[type="search"]').attr("placeholder","Search anything!").css({width:"300px",display:"inline-block",background:"white"}),$('.dataTables_filter input[type="search"]').attr("class","btn btn-round").css({width:"300px",display:"inline-block",color:"#000000",background:"#FFFFFA"}),$(".dataTables_length select").attr("class","btn btn-round").css({width:"80px","background-color":"white",color:"#000000",background:"#FFFFFA"}),$("#dtBasicExampleNewf").show(),$(".f").show()},onGoingDeliveries=()=>{document.getElementById("body").style.pointerEvents="none",document.getElementById("twob").disabled=!1,document.getElementById("oneb").disabled=!1,document.getElementById("threeb").disabled=!1,document.getElementById("twob").style.fontSize="13px",document.getElementById("oneb").style.fontSize="13px",document.getElementById("threeb").style.fontSize="13px",document.getElementById("sixb").disabled=!1,document.getElementById("sevenb").disabled=!0,document.getElementById("eightb").disabled=!1,document.getElementById("sixb").style.fontSize="13px",document.getElementById("sevenb").style.fontSize="14.5px",document.getElementById("eightb").style.fontSize="13px",document.getElementById("nineb").disabled=!1,document.getElementById("nineb").style.fontSize="13px",document.getElementById("twob").innerHTML="Assigned Deliveries",document.getElementById("oneb").innerHTML="Unassigned Deliveries",document.getElementById("sixb").innerHTML="History of On Hold Deliveries",document.getElementById("eightb").innerHTML="Completed Deliveries",document.getElementById("nineb").innerHTML="Canceled Deliveries",document.getElementById("tenb").disabled=!1,document.getElementById("tenb").style.fontSize="13px",document.getElementById("tenb").innerHTML="Returned Deliveries",$("#dtBasicExampleNewj").hide(),$(".j").hide(),$("#dtBasicExample").hide(),$(".a").hide(),$("#dtBasicExampleAp").hide(),$("#dtBasicExampleNew").hide(),$(".b").hide(),$(".c").hide(),$(".d").hide(),$(".e").hide(),$("#dtBasicExampled").hide(),$("#deliveryCreate").hide(),$("#dtBasicExampleNewf").hide(),$("#dtBasicExampleNewg").hide(),$("#dtBasicExampleNewh").hide(),$(".f").hide(),$(".g").hide(),$(".h").hide(),$("#dtBasicExampleNewi").hide(),$(".i").hide();var e=$("#dtBasicExampleNewg").DataTable({processing:!0,language:{loadingRecords:"&nbsp;",processing:"<div class='loader5'></div><h4 style='color:#0066b3'>Loading...</h4>"},paging:!0,pageLength:100,searching:!1,ordering:!1,deferRender:!0,pagingType:"full_numbers",lengthMenu:[[100,200,300,400],[100,200,300,400]],serverSide:!0,destroy:!0,ajax:{url:urlForAll+"delivery/onProcess/"+org_ID,type:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},dataSrc:"data"},columns:[{targets:0,data:"delivery_Id"},{targets:1,data:"delivery_created_date"},{targets:2,data:"delivery_status"},{targets:3,data:"delivery_created_by_name"},{targets:4,data:"delivery_created_by_role"},{targets:5,data:"assign_delivery_man_name"},{targets:6,data:"assign_delivery_man_phone"},{targets:7,data:"sender_name"},{targets:8,data:"sender_phone_number"},{targets:9,data:"sender_address"},{targets:10,data:"receiver_name"},{targets:11,data:"receiver_phone_number"},{targets:12,data:"delivery_area"},{targets:13,data:"receiver_address"},{targets:14,data:"delivery_type"},{targets:15,data:"product_name"},{targets:16,data:"product_qty"},{targets:17,data:"product_cost"},{targets:18,data:"delivery_charge"},{targets:19,data:"payment_method"},{targets:20,data:"invoice",render:function(e,t,n){return'<button id="'+org_ID+'" name="'+n.delivery_Id+'" class="btn-round btn-outline btn" onclick="invoice(this)" style="font-size:14.5px">Invoice</button>'}},{targets:21,data:"re-assign",render:function(e,t,n){return'<button id="'+n.delivery_Id+'" class="btn-round btn-outline btn reassignIt" style="font-size:14.5px">Re-Assign</button>'}}]});e.on("xhr",(function(){var t=e.ajax.json();document.getElementById("sevenb").innerHTML="Ongoing Deliveries: "+t.recordsTotal,document.getElementById("body").style.pointerEvents="auto"})),e.clear().draw(),$('.dataTables_filter input[type="search"]').attr("placeholder","Search anything!").css({width:"300px",display:"inline-block",background:"white"}),$('.dataTables_filter input[type="search"]').attr("class","btn btn-round").css({width:"300px",display:"inline-block",color:"#000000",background:"#FFFFFA"}),$(".dataTables_length select").attr("class","btn btn-round").css({width:"80px","background-color":"white",color:"#000000",background:"#FFFFFA"}),$("#dtBasicExampleNewg").show(),$(".g").show()},completedDeliveries=()=>{document.getElementById("body").style.pointerEvents="none",document.getElementById("twob").disabled=!1,document.getElementById("oneb").disabled=!1,document.getElementById("threeb").disabled=!1,document.getElementById("twob").style.fontSize="13px",document.getElementById("oneb").style.fontSize="13px",document.getElementById("threeb").style.fontSize="13px",document.getElementById("sixb").disabled=!1,document.getElementById("sevenb").disabled=!1,document.getElementById("eightb").disabled=!0,document.getElementById("sixb").style.fontSize="13px",document.getElementById("sevenb").style.fontSize="13px",document.getElementById("eightb").style.fontSize="14.5px",document.getElementById("nineb").disabled=!1,document.getElementById("nineb").style.fontSize="13px",document.getElementById("twob").innerHTML="Assigned Deliveries",document.getElementById("oneb").innerHTML="Unassigned Deliveries",document.getElementById("sixb").innerHTML="History of On Hold Deliveries",document.getElementById("sevenb").innerHTML="Ongoing Deliveries",document.getElementById("nineb").innerHTML="Canceled Deliveries",document.getElementById("tenb").disabled=!1,document.getElementById("tenb").style.fontSize="13px",document.getElementById("tenb").innerHTML="Returned Deliveries",$("#dtBasicExampleNewj").hide(),$(".j").hide(),$("#dtBasicExample").hide(),$(".a").hide(),$("#dtBasicExampleAp").hide(),$("#dtBasicExampleNew").hide(),$(".b").hide(),$(".c").hide(),$(".d").hide(),$(".e").hide(),$("#dtBasicExampled").hide(),$("#deliveryCreate").hide(),$("#dtBasicExampleNewf").hide(),$("#dtBasicExampleNewg").hide(),$("#dtBasicExampleNewh").hide(),$(".f").hide(),$(".g").hide(),$(".h").hide(),$("#dtBasicExampleNewi").hide(),$(".i").hide();var e=$("#dtBasicExampleNewh").DataTable({processing:!0,language:{loadingRecords:"&nbsp;",processing:"<div class='loader5'></div><h4 style='color:#0066b3'>Loading...</h4>"},paging:!0,pageLength:100,searching:!1,ordering:!1,deferRender:!0,pagingType:"full_numbers",lengthMenu:[[100,200,300,400],[100,200,300,400]],serverSide:!0,destroy:!0,ajax:{url:urlForAll+"delivery/complete/"+org_ID,type:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},dataSrc:"data"},columns:[{targets:0,data:"delivery_Id"},{targets:1,data:"delivery_created_by_name"},{targets:2,data:"delivery_created_by_role"},{targets:3,data:"delivery_created_date"},{targets:4,data:"delivery_status"},{targets:5,data:"delivery_complete_date"},{targets:6,data:"assign_delivery_man_name"},{targets:6,data:"assign_delivery_man_phone"},{targets:7,data:"sender_name"},{targets:8,data:"sender_phone_number"},{targets:9,data:"sender_address"},{targets:10,data:"receiver_name"},{targets:11,data:"receiver_phone_number"},{targets:12,data:"delivery_area"},{targets:13,data:"receiver_address"},{targets:14,data:"delivery_type"},{targets:15,data:"product_name"},{targets:16,data:"product_qty"},{targets:17,data:"product_cost"},{targets:18,data:"delivery_charge"},{targets:19,data:"payment_method"},{targets:20,data:"invoice",render:function(e,t,n){return'<button id="'+org_ID+'" name="'+n.delivery_Id+'" class="btn-round btn-outline btn" onclick="invoice(this)">Invoice</button>'}}]});e.on("xhr",(function(){var t=e.ajax.json();document.getElementById("eightb").innerHTML="Completed Deliveries: "+t.recordsTotal,document.getElementById("body").style.pointerEvents="auto"})),e.clear().draw(),$('.dataTables_filter input[type="search"]').attr("placeholder","Search anything!").css({width:"300px",display:"inline-block",background:"white"}),$('.dataTables_filter input[type="search"]').attr("class","btn btn-round").css({width:"300px",display:"inline-block",color:"#000000",background:"#FFFFFA"}),$(".dataTables_length select").attr("class","btn btn-round").css({width:"80px","background-color":"white",color:"#000000",background:"#FFFFFA"}),$("#dtBasicExampleNewh").show(),$(".h").show()},canceledDeliveries=()=>{document.getElementById("body").style.pointerEvents="none",document.getElementById("twob").disabled=!1,document.getElementById("oneb").disabled=!1,document.getElementById("threeb").disabled=!1,document.getElementById("twob").style.fontSize="13px",document.getElementById("oneb").style.fontSize="13px",document.getElementById("threeb").style.fontSize="13px",document.getElementById("sixb").disabled=!1,document.getElementById("sevenb").disabled=!1,document.getElementById("eightb").disabled=!1,document.getElementById("sixb").style.fontSize="13px",document.getElementById("sevenb").style.fontSize="13px",document.getElementById("eightb").style.fontSize="13px",document.getElementById("nineb").disabled=!0,document.getElementById("nineb").style.fontSize="14.5px",document.getElementById("twob").innerHTML="Assigned Deliveries",document.getElementById("oneb").innerHTML="Unassigned Deliveries",document.getElementById("sixb").innerHTML="History of On Hold Deliveries",document.getElementById("sevenb").innerHTML="Ongoing Deliveries",document.getElementById("eightb").innerHTML="Completed Deliveries",document.getElementById("tenb").disabled=!1,document.getElementById("tenb").style.fontSize="13px",document.getElementById("tenb").innerHTML="Returned Deliveries",$("#dtBasicExampleNewj").hide(),$(".j").hide(),$("#dtBasicExample").hide(),$(".a").hide(),$("#dtBasicExampleAp").hide(),$("#dtBasicExampleNew").hide(),$(".b").hide(),$(".c").hide(),$(".d").hide(),$(".e").hide(),$("#dtBasicExampled").hide(),$("#deliveryCreate").hide(),$("#dtBasicExampleNewf").hide(),$("#dtBasicExampleNewg").hide(),$("#dtBasicExampleNewh").hide(),$(".f").hide(),$(".g").hide(),$(".h").hide(),$("#dtBasicExampleNewi").hide(),$(".i").hide();var e=$("#dtBasicExampleNewi").DataTable({processing:!0,language:{loadingRecords:"&nbsp;",processing:"<div class='loader5'></div><h4 style='color:#0066b3'>Loading...</h4>"},paging:!0,pageLength:100,searching:!1,ordering:!1,deferRender:!0,pagingType:"full_numbers",lengthMenu:[[100,200,300,400],[100,200,300,400]],serverSide:!0,destroy:!0,ajax:{url:urlForAll+"orgHead/get/canceled/deliveries/"+org_ID,type:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},dataSrc:"data"},columns:[{targets:0,data:"delivery_Id"},{targets:1,data:"delivery_created_by_name"},{targets:2,data:"delivery_created_by_role"},{targets:3,data:"delivery_created_date"},{targets:4,data:"delivery_status"},{targets:7,data:"sender_name"},{targets:8,data:"sender_phone_number"},{targets:9,data:"sender_address"},{targets:10,data:"receiver_name"},{targets:11,data:"receiver_phone_number"},{targets:12,data:"delivery_area"},{targets:13,data:"receiver_address"},{targets:14,data:"delivery_type"},{targets:15,data:"product_name"},{targets:16,data:"product_qty"},{targets:17,data:"product_cost"},{targets:18,data:"delivery_charge"},{targets:19,data:"payment_method"},{targets:20,data:"recreate",render:function(e,t,n){return'<button id="'+n.creator_id+'" name="'+n.delivery_Id+'" class="btn-round btn-outline btn recreateIt" style="font-size:14.5px">Recreate Delivery</button>'}},{targets:21,data:"delete",render:function(e,t,n){return'<button id="'+org_ID+'" name="'+n.delivery_Id+'" class="btn-round btn-outline btn deleteIt" style="font-size:14.5px">Delete Delivery</button>'}}]});e.on("xhr",(function(){var t=e.ajax.json();document.getElementById("nineb").innerHTML="Canceled Deliveries: "+t.recordsTotal,document.getElementById("body").style.pointerEvents="auto"})),e.clear().draw(),$('.dataTables_filter input[type="search"]').attr("placeholder","Search anything!").css({width:"300px",display:"inline-block",background:"white"}),$('.dataTables_filter input[type="search"]').attr("class","btn btn-round").css({width:"300px",display:"inline-block",color:"#000000",background:"#FFFFFA"}),$(".dataTables_length select").attr("class","btn btn-round").css({width:"80px","background-color":"white",color:"#000000",background:"#FFFFFA"}),$("#dtBasicExampleNewi").show(),$(".i").show()},returnedDeliveries=()=>{document.getElementById("body").style.pointerEvents="none",document.getElementById("twob").disabled=!1,document.getElementById("oneb").disabled=!1,document.getElementById("threeb").disabled=!1,document.getElementById("twob").style.fontSize="13px",document.getElementById("oneb").style.fontSize="13px",document.getElementById("threeb").style.fontSize="13px",document.getElementById("sixb").disabled=!1,document.getElementById("sevenb").disabled=!1,document.getElementById("eightb").disabled=!1,document.getElementById("sixb").style.fontSize="13px",document.getElementById("sevenb").style.fontSize="13px",document.getElementById("eightb").style.fontSize="13px",document.getElementById("nineb").disabled=!1,document.getElementById("nineb").style.fontSize="13px",document.getElementById("nineb").innerHTML="Canceled Deliveries",document.getElementById("twob").innerHTML="Assigned Deliveries",document.getElementById("oneb").innerHTML="Unassigned Deliveries",document.getElementById("sixb").innerHTML="History of On Hold Deliveries",document.getElementById("sevenb").innerHTML="Ongoing Deliveries",document.getElementById("eightb").innerHTML="Completed Deliveries",document.getElementById("tenb").disabled=!0,document.getElementById("tenb").style.fontSize="14.5px",$("#dtBasicExampleNewj").hide(),$(".j").hide(),$("#dtBasicExample").hide(),$(".a").hide(),$("#dtBasicExampleAp").hide(),$("#dtBasicExampleNew").hide(),$(".b").hide(),$(".c").hide(),$(".d").hide(),$(".e").hide(),$("#dtBasicExampled").hide(),$("#deliveryCreate").hide(),$("#dtBasicExampleNewf").hide(),$("#dtBasicExampleNewg").hide(),$("#dtBasicExampleNewh").hide(),$(".f").hide(),$(".g").hide(),$(".h").hide(),$("#dtBasicExampleNewi").hide(),$(".i").hide();var e=$("#dtBasicExampleNewj").DataTable({processing:!0,language:{loadingRecords:"&nbsp;",processing:"<div class='loader5'></div><h4 style='color:#0066b3'>Loading...</h4>"},paging:!0,pageLength:100,searching:!1,ordering:!1,deferRender:!0,pagingType:"full_numbers",lengthMenu:[[100,200,300,400],[100,200,300,400]],serverSide:!0,destroy:!0,ajax:{url:urlForAll+"orgHead/get/return/deliveries/"+org_ID,type:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},dataSrc:"data"},columns:[{targets:0,data:"delivery_Id"},{targets:1,data:"delivery_created_by_name"},{targets:2,data:"delivery_created_by_role"},{targets:3,data:"delivery_created_date"},{targets:4,data:"delivery_status"},{targets:7,data:"sender_name"},{targets:8,data:"sender_phone_number"},{targets:9,data:"sender_address"},{targets:10,data:"receiver_name"},{targets:11,data:"receiver_phone_number"},{targets:12,data:"delivery_area"},{targets:13,data:"receiver_address"},{targets:14,data:"delivery_type"},{targets:15,data:"product_name"},{targets:16,data:"product_qty"},{targets:17,data:"product_cost"},{targets:18,data:"delivery_charge"},{targets:19,data:"payment_method"},{targets:20,data:"update_d",render:function(e,t,n){return'<button id="'+n.delivery_Id+"$$"+n.creator_id+"$$"+n.delivery_charge+"$$"+n.product_name+"$$"+n.product_qty+"$$"+n.product_cost+'" class="btn-round btn-outline btn returnIt" style="font-size:14.5px">Update Delivery</button>'}}]});e.on("xhr",(function(){var t=e.ajax.json();document.getElementById("tenb").innerHTML="Returned Deliveries: "+t.recordsTotal,document.getElementById("body").style.pointerEvents="auto"})),e.clear().draw(),$('.dataTables_filter input[type="search"]').attr("placeholder","Search anything!").css({width:"300px",display:"inline-block",background:"white"}),$('.dataTables_filter input[type="search"]').attr("class","btn btn-round").css({width:"300px",display:"inline-block",color:"#000000",background:"#FFFFFA"}),$(".dataTables_length select").attr("class","btn btn-round").css({width:"80px","background-color":"white",color:"#000000",background:"#FFFFFA"}),$("#dtBasicExampleNewj").show(),$(".j").show()},save=e=>{localStorage.setItem("'Accept': 'application/json'",e.id),localStorage.setItem("'Accept': 'application/jsonN'",e.name),window.open("addDeliverToDeliveryMan.html","_blank")};$("#dtBasicExampled").on("click",".assignIt",(function(){orgid=$(this).attr("id"),$t=$(this),deliveryManId=document.getElementById("deliveryManList").value,$("#tick").hide(),$(".circle-loader").removeClass("load-complete"),$("#sure").html("Are you sure?"),$("#myModal").modal()})),$(".btn-ok").click((function(){$("#sure").html("Please wait!"),document.getElementById("modalCancelG").disabled=!0,document.getElementById("modalApproveG").disabled=!0,deliveryManId?$.ajax({async:!0,type:"PUT",url:urlForAll+"delivery/assign/"+org_ID+"/"+orgid+"/"+deliveryManId,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(e){$("#sure").html("Please wait!"),setTimeout((function(){$(".circle-loader").addClass("load-complete"),$("#tick").show(),$("#sure").html("Delivery man assigned!")}),900),setTimeout((function(){$("#myModal").modal("hide");var e=$("#dtBasicExampled").DataTable();e.row($t.parents("tr")).remove().draw(),document.getElementById("oneb").innerHTML="Unassigned Deliveries: "+e.column(0).data().length,document.getElementById("modalCancelG").disabled=!1,document.getElementById("modalApproveG").disabled=!1}),2e3)},error:function(e){document.getElementById("modalCancelG").disabled=!1,document.getElementById("modalApproveG").disabled=!1,"responseJSON"==Object.keys(e)[17]?($("#wrongSMS").html(e.responseJSON.errorMessage),$("#myModalWrongSMS").modal(),setTimeout((function(){$("#myModal").modal("hide")}),500)):($("#myModal").modal("hide"),$("#myModal2").modal())}}):(document.getElementById("modalCancelG").disabled=!1,document.getElementById("modalApproveG").disabled=!1,$("#myModal").modal("hide"),$("#myModal23").modal())})),$("#dtBasicExampleNew").on("click",".reassignIt",(function(){tablexxx="#dtBasicExampleNew",$("#dml").show(),$("#deliveryManList2").show(),$.ajax({url:urlForAll+"deliveryMan/approved/"+org_ID,type:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(e){$("#deliveryManList2").empty().append('<option selected="selected" value="">Select Delivery Man</option>');for(var t=0;t<e.data.length;t++){var n=new Option(e.data[t].delivery_man_id,e.data[t].delivery_man_id);$(n).html(e.data[t].name),$("#deliveryManList2").append(n)}}}),orgid=$(this).attr("id"),$t=$(this),$("#tickReassign").hide(),$(".circle-loader").hide(),$("#sureReassign").hide(),$(".circle-loader").removeClass("load-complete"),$("#myModalReassign").modal()})),$("#dtBasicExampleNewg").on("click",".reassignIt",(function(){tablexxx="#dtBasicExampleNewg",$("#dml").show(),$("#deliveryManList2").show(),$.ajax({url:urlForAll+"deliveryMan/approved/"+org_ID,type:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(e){$("#deliveryManList2").empty().append('<option selected="selected" value="">Select Delivery Man</option>');for(var t=0;t<e.data.length;t++){var n=new Option(e.data[t].delivery_man_id,e.data[t].delivery_man_id);$(n).html(e.data[t].name),$("#deliveryManList2").append(n)}}}),orgid=$(this).attr("id"),$t=$(this),$("#tickReassign").hide(),$(".circle-loader").hide(),$("#sureReassign").hide(),$(".circle-loader").removeClass("load-complete"),$("#myModalReassign").modal()})),$(".btn-okReassign").click((function(){$("#dml").hide(),$("#deliveryManList2").hide(),$("#sureReassign").html("Please wait!"),$(".circle-loader").show(),$("#sureReassign").show(),document.getElementById("modalCancelGReassign").disabled=!0,document.getElementById("modalApproveGReassign").disabled=!0,(deliveryManId=document.getElementById("deliveryManList2").value)?$.ajax({async:!0,type:"PUT",url:urlForAll+"delivery/assign/"+org_ID+"/"+orgid+"/"+deliveryManId,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(e){var t=$(""+tablexxx).DataTable();t.cell({row:t.row($t.closest("tr")).index(),column:5}).data(e.assign_delivery_man_name),t.cell({row:t.row($t.closest("tr")).index(),column:6}).data(e.assign_delivery_man_phone),$("#sureReassign").html("Please wait!"),setTimeout((function(){$(".circle-loader").addClass("load-complete"),$("#tickReassign").show(),$("#sureReassign").html("Delivery man re-assigned!")}),900),setTimeout((function(){$("#myModalReassign").modal("hide"),document.getElementById("modalCancelGReassign").disabled=!1,document.getElementById("modalApproveGReassign").disabled=!1}),2e3)},error:function(e,t,n){document.getElementById("modalCancelGReassign").disabled=!1,document.getElementById("modalApproveGReassign").disabled=!1,$("#myModalReassign").modal("hide"),$("#myModal2").modal()}}):(document.getElementById("modalCancelGReassign").disabled=!1,document.getElementById("modalApproveGReassign").disabled=!1,$("#myModalReassign").modal("hide"),$("#myModal23").modal())}));var invoiceUnass=e=>{window.open(urlForAll+"reports/individual/report/preAssign/"+e.id+"/"+e.name)},mapxx=()=>{window.open("locationFinder.html","_blank")},invoice=e=>{window.open(urlForAll+"reports/individual/report/"+e.id+"/"+e.name)};function recall(){var e=document.getElementById("senderList").value;document.getElementById("r_name").value="",document.getElementById("r_number").value="",document.getElementById("rec_address").value="",document.getElementById("pac-input2").value="",document.getElementById("DELIVERY_NOTE").value="",document.getElementById("product_cost").value="",document.getElementById("des_lat").value="",document.getElementById("des_longi").value="",document.getElementById("product_name").value="",document.getElementById("product_qty").value="",document.getElementById("autoAss").value="",$.ajax({async:!0,type:"GET",url:urlForAll+"profile/get/profile/"+e,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(e){document.getElementById("pac-input").value=e.data.sender_address,document.getElementById("s_name").value=e.data.sender_name,document.getElementById("s_number").value=e.data.sender_phone_number,document.getElementById("lat").value=e.data.sender_lat,document.getElementById("longi").value=e.data.sender_longi}})}function convertTime24to12(e){var t=e.split(":");return 12==+t[0]?t[0]+":"+t[1]+" PM":0==+t[0]?"12:"+t[1]+" AM":+t[0]>12?+t[0]-12+":"+t[1]+" PM":+t[0]+":"+t[1]+" AM"}$("#managers2").change((function(){"Cash on Delivery"==$(this).val()?$("#cod").show():$("#cod").hide()})),$("#dtBasicExampleNewi").on("click",".recreateIt",(function(){orgid=$(this).attr("id"),deliveryId=$(this).attr("name"),$t=$(this),$("#modalRecDelV").show(),$("#modalRecDelV2").hide(),$("#tickRD").hide(),$(".circle-loader").removeClass("load-complete"),$("#recreateDelete").html("Recreate Delivery?"),$("#modalRecDelV").html("Recreate"),$("#sureRD").html("Are you sure?"),$("#myModalRecreateDelete").modal(),document.getElementById("modalCancelV").disabled=!1,document.getElementById("modalRecDelV").disabled=!1})),$(".btn-okRD").click((function(){$("#sureRD").html("Please wait!"),document.getElementById("modalCancelV").disabled=!0,document.getElementById("modalRecDelV").disabled=!0,$.ajax({async:!0,type:"PUT",url:urlForAll+"orgHead/approve/cancel/delivery/"+org_ID+"/"+orgid+"/"+deliveryId+"/yes",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(e){$("#sureRD").html("Please wait!"),setTimeout((function(){$(".circle-loader").addClass("load-complete"),$("#tickRD").show(),$("#sureRD").html("Delivery Recreated! Please Check Unassigned Deliveries!")}),900),setTimeout((function(){$("#myModalRecreateDelete").modal("hide");var e=$("#dtBasicExampleNewi").DataTable();e.row($t.parents("tr")).remove().draw(),document.getElementById("nineb").innerHTML="Canceled Deliveries: "+e.column(0).data().length,document.getElementById("modalCancelG").disabled=!1,document.getElementById("modalRecDelV").disabled=!1}),3600)},error:function(e,t,n){document.getElementById("modalCancelG").disabled=!1,document.getElementById("modalRecDelV").disabled=!1,$("#myModalRecreateDelete").modal("hide"),$("#myModal2").modal()}})})),$("#dtBasicExampleNewi").on("click",".deleteIt",(function(){orgid=$(this).attr("id"),deliveryId=$(this).attr("name"),$t=$(this),$("#modalRecDelV2").show(),$("#modalRecDelV").hide(),$("#tickRD").hide(),$(".circle-loader").removeClass("load-complete"),$("#recreateDelete").html("Recreate Delivery?"),$("#modalRecDelV2").html("Delete"),$("#sureRD").html("Are you sure?"),$("#myModalRecreateDelete").modal(),document.getElementById("modalCancelV").disabled=!1,document.getElementById("modalRecDelV2").disabled=!1})),$(".btn-okRD2").click((function(){$("#sureRD").html("Please wait!"),document.getElementById("modalCancelV").disabled=!0,document.getElementById("modalRecDelV2").disabled=!0,$.ajax({async:!0,type:"PUT",url:urlForAll+"orgHead/approve/cancel/delivery/"+org_ID+"/"+orgid+"/"+deliveryId+"/no",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(e){$("#sureRD").html("Please wait!"),setTimeout((function(){$(".circle-loader").addClass("load-complete"),$("#tickRD").show(),$("#sureRD").html("This Delivery Has Been Deleted!")}),900),setTimeout((function(){$("#myModalRecreateDelete").modal("hide");var e=$("#dtBasicExampleNewi").DataTable();e.row($t.parents("tr")).remove().draw(),document.getElementById("nineb").innerHTML="Canceled Deliveries: "+e.column(0).data().length,document.getElementById("modalCancelG").disabled=!1,document.getElementById("modalRecDelV2").disabled=!1}),3e3)},error:function(e){document.getElementById("modalCancelG").disabled=!1,document.getElementById("modalRecDelV2").disabled=!1,$("#myModalRecreateDelete").modal("hide"),$("#myModal2").modal()}})})),document.getElementById("createDelivery").addEventListener("click",(function(e){document.getElementById("CLOSEIT").disabled=!1;var t,n=document.getElementById("timepicker-12-hr").value,d=document.getElementById("s_name").value,a=document.getElementById("s_number").value,r=document.getElementById("pac-input").value,l=document.getElementById("r_name").value,o=document.getElementById("r_number").value,i=document.getElementById("pac-input2").value,s=document.getElementById("rec_address").value,c=document.getElementById("managers2").value,m=document.getElementById("DELIVERY_NOTE").value,u=document.getElementById("deliveryType").value,g=document.getElementById("delivery_charge").value,y=String(document.getElementById("managers").value),h=String(document.getElementById("lat").value),p=String(document.getElementById("longi").value),v=String(document.getElementById("des_lat").value),b=String(document.getElementById("des_longi").value),E=String(document.getElementById("product_name").value),I=String(document.getElementById("product_qty").value),_=document.getElementById("senderList").value,B=document.getElementById("product_cost").value,D=document.getElementById("autoAss").value;1==(_?1:(document.getElementById("wrongThisDeliveryCreate").innerHTML="Please select a sender from list!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("senderList").focus(),0))&&1==(""==n||null==n?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Please give a Pickup Time!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("timepicker-12-hr").focus(),0):1)&&1==(""==d||null==d?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Sender Name cannot be empty!",$("#myModalWrongDeliveryCreate").modal("show"),0):1)&&1==(""==a||null==a?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Sender's Phone Number cannot be empty!",$("#myModalWrongDeliveryCreate").modal("show"),0):(a.length<11||a.length>11)&&1==!/\D/.test(a)?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Sender's Phone Number must be of 11 digits!",$("#myModalWrongDeliveryCreate").modal("show"),0):11===a.match(/\d/g).length&&1==!/\D/.test(a)?1:(document.getElementById("wrongThisDeliveryCreate").innerHTML="Sender's Phone Number not valid!",$("#myModalWrongDeliveryCreate").modal("show"),0))&&1==(""==l||null==l?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Receiver's Name cannot be empty!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("r_name").focus(),0):1)&&1==(""==o||null==o?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Receiver's Phone Number cannot be empty!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("r_number").focus(),0):(o.length<11||o.length>11)&&1==!/\D/.test(o)?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Receiver's Phone Number must be of 11 digits!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("r_number").focus(),0):11===o.match(/\d/g).length&&1==!/\D/.test(o)?1:(document.getElementById("wrongThisDeliveryCreate").innerHTML="Receiver's Phone Number not valid!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("r_number").focus(),0))&&1==(""==E||null==E?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Product Name cannot be empty!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("product_name").focus(),0):1)&&1==(parseInt(I)<=0||0==I.charAt(0)?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Product Quantity must be greater than 0!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("product_qty").focus(),0):1==isNaN(I)||""==I||0==!/\D/.test(I)?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Product Quantity must be a number!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("product_qty").focus(),0):1==!/\D/.test(I)?1:void 0)&&1==(parseInt(B)<=0||0==B.charAt(0)?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Product Cost must be greater than 0!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("product_cost").focus(),0):1==isNaN(B)||""==B||0==!/\D/.test(B)?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Product Cost must be a number!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("product_cost").focus(),0):1==!/\D/.test(B)?1:void 0)&&1==(parseInt(g)<=0||0==g.charAt(0)?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Delivery Charge must be greater than 0!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("delivery_charge").focus(),0):1==isNaN(g)||""==g||0==!/\D/.test(g)?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Delivery Charge must be a number!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("delivery_charge").focus(),0):1==!/\D/.test(g)?1:void 0)&&1==(""==r||null==r?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Sender's Address cannot be empty!!",$("#myModalWrongDeliveryCreate").modal("show"),0):1)&&1==(""==s||null==s?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Please give Receiver's Address!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("rec_address").focus(),0):1)&&1==(""==i||null==i?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Receiver's Address on map cannot be empty!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("pac-input2").focus(),0):1)&&1==(""==v||""==b?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Please select Receiver's Address on map!",$("#myModalWrongDeliveryCreate").modal("show"),0):1)&&1==(""==D||null==D?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Please Select Auto Assign Delivery To Delivery Man!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("autoAss").focus(),0):1)&&(document.getElementById("createDelivery").disabled=!0,t=JSON.stringify({delivery_status:"",delivery_type:u,sender_address:r,receiver_address:s,sender_phone_number:a,receiver_phone_number:o,sender_name:d,receiver_name:l,payment_method:c,delivery_charge:g,product_cost:B,sender_lat:h,sender_longi:p,receiver_lat:v,receiver_longi:b,product_name:E,product_qty:I,pickup_time:n,delivery_note:m,delivery_area:y}),$("#tickD2").hide(),$(".circle-loader").show(),$(".circle-loader").removeClass("load-complete"),$("#sureD2X").html(""),$("#sureD2Y").html(""),$("#sureD2Z").html(""),$("#sureD2").html(""),$("#sureD22").html(""),$.ajax({type:"POST",url:urlForAll+"delivery/create/"+_+"/"+D,data:t,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(e){$("#myModalCreateD1").modal("show"),$("#sureD2").html("Please wait!"),"OK"==e.status&&(setTimeout((function(){$(".circle-loader").addClass("load-complete");var t=Object.keys(e.data);$("#tickD2").show(),$("#sureD2").html("Delivery Created!"),$("#sureD22").html("Delivery ID: "+e.data.delivery_Id),"auto_assign_done"==t[1]&&(e.data.auto_assign_done?($("#sureD2Z").html("This Delivery Has Been Auto Assigned To A Delivery Man Based On Receiver's Area and Delivery Man's Selected Area and His Availability!"),$("#sureD2X").html("Assigned Delivery Man Name: "+e.data.assign_delivery_man_name),$("#sureD2Y").html("Assigned Delivery Man Phone Number: "+e.data.assign_delivery_man_phone),$("#sureD2X").show(),$("#sureD2Y").show()):($("#sureD2Z").html("Sorry! No Delivery Man Found Based On Delivery Man's Selected Area and Receiver's Area!"),$("#sureD2X").hide(),$("#sureD2Y").hide()))}),1e3),setTimeout((function(){document.getElementById("createDelivery").disabled=!1}),1e3),recall())},error:function(e){document.getElementById("createDelivery").disabled=!1;var t=Object.keys(e);return $(".circle-loader").hide(),$("#myModalCreateD1").modal("show"),"responseJSON"==t[17]?(e.responseJSON.errorMessage.includes("You can not create delivery now.")?divElement.innerHTML+="You can not create delivery now. Please contact with Quixx!<br>":divElement.innerHTML+=e.responseJSON.errorMessage+"<br>",$(".circle-loader").hide(),$("#sureD2").html(""),void $("#sureD2ZZ").html("")):($(".circle-loader").hide(),$("#sureD2").html(""),$("#sureD2ZZ").html(""),void(divElement.innerHTML+="Something went wrong!<br>Please Wait A Bit?<br>"))}}))}));var counterChecked,tableForAuto,hello=()=>{document.getElementById("body").style.pointerEvents="auto"},divElement=document.getElementById("sureD2Z"),keysx=[],extrax1=[],extrax2=[],deliveryList=[],assignedDeliveryMan=[],assignedDeliveryManPhone=[];function doIt(e,t){setTimeout((function(){var n,d=document.getElementById("senderListExcel").value,a=document.getElementById("autoAss2").value,r=excelData[e].Pickup_Time,l=excelData[e].Delivery_Type,o=excelData[e].Sender_Name,i=excelData[e].Sender_Phone_Number,s=excelData[e].Sender_Address,c=excelData[e].Sender_Lattitude,m=excelData[e].Sender_Longitude,u=excelData[e].Receiver_Name,g=excelData[e].Receiver_Phone_Number,y=excelData[e].Receiver_Area,h=excelData[e].Receiver_Address,p=excelData[e].Receiver_Lattitude,v=excelData[e].Receiver_Longitude,b=excelData[e].Payment_Method,E=excelData[e].Product_Name,I=excelData[e].Product_Quantity_Pieces,_=excelData[e].Product_Cost,B=excelData[e].Delivery_Charge,D=excelData[e].Delivery_Note;1==(""==r||null==r||null==r?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Please give a Pickup Time!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1)&&1==(""==o||null==o||null==o?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Sender Name cannot be empty!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1)&&1==(""==i||null==i||null==i?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Sender's Phone Number cannot be empty!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):(i.length<11||i.length>11)&&1==!/\D/.test(i)?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Sender's Phone Number must be of 11 digits!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):11===i.match(/\d/g).length&&1==!/\D/.test(i)?1:(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Sender's Phone Number not valid!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0))&&1==(""==u||null==u||null==u?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Receiver's Name cannot be empty!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1)&&1==(""==g||null==g||null==g?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Receiver's Phone Number cannot be empty!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):(g.length<11||g.length>11)&&1==!/\D/.test(g)?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Receiver's Phone Number must be of 11 digits!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):11===g.match(/\d/g).length&&1==!/\D/.test(g)?1:(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Receiver's Phone Number not valid!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0))&&1==(""==E||null==E||null==E?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Product Name cannot be empty!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1)&&1==(parseInt(I)<=0||0==String(I).charAt(0)?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Product Quantity must be greater than 0!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1==isNaN(I)||""==I||null==I||0==!/\D/.test(I)?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Product Quantity must be a number!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1==!/\D/.test(I)?1:void 0)&&1==(parseInt(_)<=0||0==String(_).charAt(0)?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Product Cost must be greater than 0!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1==isNaN(_)||""==_||null==_||0==!/\D/.test(_)?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Product Cost must be a number!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1==!/\D/.test(_)?1:void 0)&&1==(parseInt(B)<=0||0==String(B).charAt(0)?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Delivery Charge must be greater than 0!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1==isNaN(B)||""==B||null==B||0==!/\D/.test(B)?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Delivery Charge must be a number!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1==!/\D/.test(B)?1:void 0)&&1==(""==s||null==s||null==s?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Sender's Address cannot be empty!!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1)&&1==(""==y||null==y||null==y?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Receiver's Area cannot be empty!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1)&&1==(""==h||null==h||null==h?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Please give Receiver's Address!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1)&&1==(""==c||""==m||null==c||null==m?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Please give Sender's Lattitude/Longitude!!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1)&&1==(""==p||""==v||null==v||null==p?(document.getElementById("wrongThisDeliveryCreate").innerHTML=`Deliver No: ${e+1} - Please give Receiver's Lattitude/Longitude!!`,$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("CLOSEIT").disabled=!1,hello(),setTimeout((function(){$("#myModalCreateD1").modal("hide")}),2500),0):1)&&(null==D&&(D=""),n=JSON.stringify({delivery_status:"",delivery_type:l,sender_address:s,receiver_address:h,sender_phone_number:i,receiver_phone_number:g,sender_name:o,receiver_name:u,payment_method:b,delivery_charge:B,product_cost:_,sender_lat:c,sender_longi:m,receiver_lat:p,receiver_longi:v,product_name:E,product_qty:I,pickup_time:r,delivery_note:D,delivery_area:y}),$.ajax({async:!0,type:"POST",url:urlForAll+"delivery/create/"+d+"/"+a,data:n,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(n){document.getElementById("sureD2ZZ").innerHTML=0==e?`<br>${e+1} Delivery Created!<br>`:`<br>${e+1} Deliveries Created!<br>`,keysx[e]=Object.keys(n.data),extrax1[e]=n.data,deliveryList[e]=n.data.delivery_Id;var d="";"auto_assign_done"==keysx[e][1]?extrax1[e].auto_assign_done?(assignedDeliveryMan[e]=n.data.assign_delivery_man_name,assignedDeliveryManPhone[e]=n.data.assign_delivery_man_phone,d+=`Delivery ID: ${deliveryList[e]}<br>`,d+=`Assigned Delivery Man Name: ${assignedDeliveryMan[e]}<br>`,d+=`Assigned Delivery Man Phone: ${assignedDeliveryManPhone[e]}<hr><br>`):(d+=`<hr>Delivery ID: ${deliveryList[e]}<br>`,d+="No Delivery Man Found For Given Area!<br>"):d+=`Delivery ID: ${deliveryList[e]}<br>`,divElement.innerHTML+=d,"OK"==n.status&&(e==t-1?(setTimeout((function(){$("#sureD2").html(e+1+" Deliveries Created!"),$(".circle-loader").addClass("load-complete"),$("#tickD2").show(),document.getElementById("sureD2ZZ").innerHTML=""}),1e3),setTimeout((function(){document.getElementById("createDeliverywithExcel").disabled=!1,document.getElementById("autoAss2").value=""}),3e3),document.getElementById("CLOSEIT").disabled=!1,document.getElementById("body").style.pointerEvents="auto",hello()):doIt(++e,t))},error:function(e){return document.getElementById("body").style.pointerEvents="auto",document.getElementById("createDeliverywithExcel").disabled=!1,document.getElementById("CLOSEIT").disabled=!1,"responseJSON"==Object.keys(e)[17]?(e.responseJSON.errorMessage.includes("You can not create delivery now.")?divElement.innerHTML+="You can not create delivery now. Please contact with Quixx!<br>":divElement.innerHTML+=e.responseJSON.errorMessage+"<br>",$(".circle-loader").hide(),$("#sureD2").html(""),void $("#sureD2ZZ").html("")):($(".circle-loader").hide(),$("#sureD2").html(""),$("#sureD2ZZ").html(""),void(divElement.innerHTML+="Something went wrong!<br>Please Wait A Bit?<br>"))}}))}),100)}function getSelectOptions(e){var t=$(`<select>${this_select_content}</select>`);return e&&t.val(e).find(":selected").attr("selected",!0),t.html()}document.getElementById("createDeliverywithExcel").addEventListener("click",(function(e){var t=document.getElementById("senderListExcel").value,n=document.getElementById("autoAss2").value;if(t)if(n)if(1==flag){$("#tickD2").hide(),$(".circle-loader").show(),$(".circle-loader").removeClass("load-complete"),$("#sureD2").html(""),$("#myModalCreateD1").modal("show"),$("#sureD2").html("Please wait!"),$("#sureD2Z").html(""),document.getElementById("CLOSEIT").disabled=!0;var d=excelData.length;setTimeout((function(){doIt(0,d)}),1e3)}else document.getElementById("wrongThisUpload2").innerHTML="Please Upload An Excel File!",$("#myModalWrongUpload2").modal("show");else document.getElementById("wrongThisDeliveryCreate").innerHTML="Please Select Auto Assign Delivery To Delivery Man!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("autoAss2").focus();else document.getElementById("wrongThisDeliveryCreate").innerHTML="Please select a sender from list!",$("#myModalWrongDeliveryCreate").modal("show"),document.getElementById("senderListExcel").focus()})),document.getElementById("assignAllDeliveries").addEventListener("click",(function(e){counterChecked=0,document.getElementById("modalAssignAll").disabled=!1,$("#circleHide").hide(),$("#tickAssignAll").hide(),$("#sureAssignAllAssigned2").hide(),$("#sureAssignAll").hide(),$("#sureAssignAllAssigned").hide(),$("#hideAUTO").show(),(tableForAuto=$("#dtBasicExampledAuto").DataTable({processing:!0,language:{loadingRecords:"&nbsp;",processing:"<div class='loader5'></div><h4 style='color:#0066b3'>Loading...</h4>"},paging:!0,deferRender:!0,pagingType:"full_numbers",paging:!1,destroy:!0,ajax:{url:urlForAll+"delivery/auto/assign/all/"+org_ID,type:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},dataSrc:"data"},infoCallback:function(e,t,n,d,a,r){return""},columns:[{targets:15,data:"select",render:function(e,t,n,d){return`<input class="checks" type="checkbox" name="mycheckboxesAuto" value=${n.delivery_Id}>`}},{targets:16,data:"delivery_Id"},{targets:1,data:"update",render:function(e,t,n,d){return`<select class='browser-default custom-select2' id=auto${n.delivery_Id} style='text-align-last:center;' data-col=${d.col}>\n\t\t\t\t\t\t\t${getSelectOptions(n.assign_delivery_man_id)}</select>`}},{targets:2,data:"delivery_created_by_name"},{targets:3,data:"delivery_created_by_role"},{targets:4,data:"sender_name"},{targets:5,data:"sender_phone_number"},{targets:6,data:"sender_address"},{targets:7,data:"receiver_name"},{targets:8,data:"receiver_phone_number"},{targets:9,data:"delivery_area"},{targets:10,data:"receiver_address"},{targets:11,data:"product_name"},{targets:12,data:"product_qty"},{targets:13,data:"product_cost"},{targets:14,data:"delivery_charge"},{targets:15,data:"payment_method"}]})).on("xhr",(function(){})),tableForAuto.clear().draw(),$('.dataTables_filter input[type="search"]').attr("placeholder","Search anything!").css({width:"300px",display:"inline-block",background:"white"}),$('.dataTables_filter input[type="search"]').attr("class","btn btn-round").css({width:"300px",display:"inline-block",color:"#000000",background:"#FFFFFA"}),$(".dataTables_length select").attr("class","btn btn-round").css({width:"80px","background-color":"white",color:"#000000",background:"#FFFFFA"}),$("#modalAssignAll").prop("disabled",!0),$("#myModalAuto").modal("show")}));var abtn=document.querySelector("#btnAuto");function uncheckAll(e){e.preventDefault(),check(!1),$("#modalAssignAll").prop("disabled",!0),this.onclick=checkAll}function checkAll(e){e.preventDefault(),check(),$("#modalAssignAll").prop("disabled",!1),this.onclick=uncheckAll}function check(e=!0){document.querySelectorAll('input[name="mycheckboxesAuto"]').forEach(t=>{t.checked=e})}abtn.onclick=checkAll,$("#dtBasicExampledAuto").on("change",'input[type="checkbox"]',(function(){document.querySelectorAll("input[name=mycheckboxesAuto]:checked").length>0?$("#modalAssignAll").prop("disabled",!1):$("#modalAssignAll").prop("disabled",!0)}));var arr,id_delivery_update,del_id,creator_ID,deliveryAutoID=[],deliveryAutoDeliveryMan=[],deliveryAutoIterator=0;function autoAssignDeliveryManUnassingedTable(e){setTimeout((function(){$.ajax({async:!0,type:"PUT",url:urlForAll+"delivery/assign/"+org_ID+"/"+deliveryAutoID[e]+"/"+deliveryAutoDeliveryMan[e],headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(t){0==e?$("#sureAssignAllAssigned").html(e+1+" Delivery Assigned!"):$("#sureAssignAllAssigned").html(e+1+" Deliveries Assigned!"),document.getElementById("sureAssignAllAssigned2").innerHTML+=`Delivery ID: ${deliveryAutoID[e]} Assigned<br><hr>`,e==deliveryAutoIterator-1?(setTimeout((function(){$("#circleHide").addClass("load-complete"),$("#tickAssignAll").show(),$("#sureAssignAll").html("Delivery man assigned to the selected deliveries!")}),900),document.getElementById("closeModalAssignAll").disabled=!1):autoAssignDeliveryManUnassingedTable(++e)},error:function(e){document.getElementById("closeModalAssignAll").disabled=!1,"responseJSON"==Object.keys(e)[17]?($("#wrongSMS").html(e.responseJSON.errorMessage),$("#myModalWrongSMS").modal(),$("#myModalAuto").modal("hide")):($("#myModal").modal("hide"),$("#myModal2").modal())}})}),10)}document.getElementById("modalAssignAll").addEventListener("click",(function(e){deliveryAutoID=[],deliveryAutoDeliveryMan=[],deliveryAutoIterator=0,tableForAuto.rows().nodes().to$().find('input[type="checkbox"]').each((function(){this.checked&&(deliveryAutoID[deliveryAutoIterator]=this.value,deliveryAutoDeliveryMan[deliveryAutoIterator++]=document.getElementById("auto"+this.value).value)})),$("#hideAUTO").hide(),$("#circleHide").removeClass("load-complete"),$("#circleHide").show(),$("#sureAssignAllAssigned2").show(),$("#sureAssignAllAssigned2").html(""),$("#sureAssignAll").html("Please wait!"),$("#sureAssignAllAssigned").html(""),$("#sureAssignAll").show(),$("#sureAssignAllAssigned").show(),document.getElementById("sureAssignAllAssigned2").innerHTML="",document.getElementById("closeModalAssignAll").disabled=!0,document.getElementById("modalAssignAll").disabled=!0,setTimeout((function(){autoAssignDeliveryManUnassingedTable(0)}),10)}));var thikKoro=(e,t)=>{$("#managersU").empty(),$.ajax({url:urlForAll+"approved/delivery/area",type:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(e){for(var n,d=0;d<e.data.length;d++){var a=new Option(e.data[d],e.data[d]);$(a).html(e.data[d]),t==e.data[d]&&(n=d),$("#managersU").append(a)}document.getElementById("managersU").selectedIndex=n}}),$("#managers2U").empty(),$.ajax({url:urlForAll+"delivery/payment/method/"+localStorage.getItem("token"),type:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(t){for(var n,d=0;d<t.data.length;d++){var a=new Option(t.data[d],t.data[d]);$(a).html(t.data[d]),e==t.data[d]&&(n=d),$("#managers2U").append(a)}document.getElementById("managers2U").selectedIndex=n}})},wrongKeteDao=()=>{$("#wrongmaplocation").hide(),$("#wrongpercost").hide(),$("#wrongrpqty").hide(),$("#wrongpname").hide(),$("#wrongmaplocation").hide(),$("#wrongrphone").hide(),$("#wrongrname").hide(),$("#wrongTime").hide(),$("#wrongdcost").hide(),$("#wrongraddress").hide()},l=0;$("#dtBasicExampled").on("click",".updateCh",(function(){id_delivery_update=$(this).attr("id"),arr=id_delivery_update.split("$$"),del_id=arr[0],creator_ID=arr[1],thikKoro(arr[8],arr[11]),document.getElementById("delivery_cost_update").value=arr[2],document.getElementById("timeU").value=arr[3],document.getElementById("r_nameU").value=arr[4],document.getElementById("r_numberU").value=arr[5],document.getElementById("product_nameU").value=arr[6],document.getElementById("product_qtyU").value=arr[7],document.getElementById("managers2U").value=arr[8],document.getElementById("product_costU").value=arr[9],document.getElementById("DELIVERY_NOTEU").value=arr[10],document.getElementById("managersU").value=arr[11],document.getElementById("pac-input3").value=arr[12],document.getElementById("rec_addressU").value=arr[12],document.getElementById("des_latU").value=arr[13],document.getElementById("des_longiU").value=arr[14],markerx.length>0&&(removeMarkers3(),markerx[1].setMap(null)),markerx[1]=new google.maps.Marker({position:new google.maps.LatLng(arr[13],arr[14]),map:window.map});const e=new google.maps.LatLng(arr[13],arr[14]);window.map.setZoom(13),window.map.panTo(e),$t=$(this),$("#formUpdateDC").show(),$("#tick3DC").hide(),$("#circleLoad3DC").hide(),$("#sure3DC").hide(),$("#myModalDeliveryCostUpdate").modal("show"),google.maps.event.trigger(map3,"resize"),wrongKeteDao()})),$(".btn-ok-updateDC").click((function(){wrongKeteDao();var e=document.getElementById("delivery_cost_update").value,t=document.getElementById("timeU").value,n=arr[15],d=arr[16],a=arr[17],r=document.getElementById("r_nameU").value,l=document.getElementById("r_numberU").value,o=document.getElementById("pac-input3").value,i=document.getElementById("rec_addressU").value,s=document.getElementById("managers2U").value,c=document.getElementById("DELIVERY_NOTEU").value,m=arr[18],u=String(document.getElementById("managersU").value),g=String(arr[19]),y=String(arr[20]),h=String(document.getElementById("des_latU").value),p=String(document.getElementById("des_longiU").value),v=String(document.getElementById("product_nameU").value),b=String(document.getElementById("product_qtyU").value),E=document.getElementById("product_costU").value,I=arr[21],_=arr[22],B=arr[23],D=arr[24],w=arr[25];1==(""==t||null==t?(document.getElementById("wrongTime").innerHTML="Please give a Pickup Time!",$("#wrongTime").show(),document.getElementById("timeU").focus(),0):1)&&1==(""==n||null==n?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Sender Name cannot be empty!",$("#myModalWrongDeliveryCreate").modal("show"),0):1)&&1==(""==d||null==d?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Sender's Phone Number cannot be empty!",$("#myModalWrongDeliveryCreate").modal("show"),0):(d.length<11||d.length>11)&&1==!/\D/.test(d)?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Sender's Phone Number must be of 11 digits!",$("#myModalWrongDeliveryCreate").modal("show"),0):11===d.match(/\d/g).length&&1==!/\D/.test(d)?1:(document.getElementById("wrongThisDeliveryCreate").innerHTML="Sender's Phone Number not valid!",$("#myModalWrongDeliveryCreate").modal("show"),0))&&1==(""==r||null==r?(document.getElementById("wrongrname").innerHTML="Receiver's Name cannot be empty!",$("#wrongrname").show(),document.getElementById("r_nameU").focus(),0):1)&&1==(""==l||null==l?(document.getElementById("wrongrphone").innerHTML="Receiver's Phone Number cannot be empty!",$("#wrongrphone").show(),document.getElementById("r_numberU").focus(),0):(l.length<11||l.length>11)&&1==!/\D/.test(l)?(document.getElementById("wrongrphone").innerHTML="Receiver's Phone Number must be of 11 digits!",$("#wrongrphone").show(),document.getElementById("r_numberU").focus(),0):11===l.match(/\d/g).length&&1==!/\D/.test(l)?1:(document.getElementById("wrongrphone").innerHTML="Receiver's Phone Number not valid!",$("#wrongrphone").show(),document.getElementById("r_numberU").focus(),0))&&1==(""==v||null==v?(document.getElementById("wrongpname").innerHTML="Product Name cannot be empty!",$("#wrongpname").show(),document.getElementById("product_nameU").focus(),0):1)&&1==(parseInt(b)<=0||0==b.charAt(0)?(document.getElementById("wrongrpqty").innerHTML="Product Quantity must be greater than 0!",$("#wrongrpqty").show(),document.getElementById("product_qtyU").focus(),0):1==isNaN(b)||""==b||0==!/\D/.test(b)?(document.getElementById("wrongrpqty").innerHTML="Product Quantity must be a number!",$("#wrongrpqty").show(),document.getElementById("product_qtyU").focus(),0):1==!/\D/.test(b)?1:void 0)&&1==(parseInt(E)<=0||0==E.charAt(0)?(document.getElementById("wrongpercost").innerHTML="Product Cost must be greater than 0!",$("#wrongpercost").show(),document.getElementById("product_costU").focus(),0):1==isNaN(E)||""==E||0==!/\D/.test(E)?(document.getElementById("wrongpercost").innerHTML="Product Cost must be a number!",$("#wrongpercost").show(),document.getElementById("product_costU").focus(),0):1==!/\D/.test(E)?1:void 0)&&1==(parseInt(e)<=0||0==e.charAt(0)?(document.getElementById("wrongdcost").innerHTML="Delivery Charge must be greater than 0!",$("#wrongdcost").show(),document.getElementById("delivery_cost_update").focus(),0):1==isNaN(e)||""==e||0==!/\D/.test(e)?(document.getElementById("wrongdcost").innerHTML="Delivery Charge must be a number!",$("#wrongdcost").show(),document.getElementById("delivery_cost_update").focus(),0):1==!/\D/.test(e)?1:void 0)&&1==(""==a||null==a?(document.getElementById("wrongThisDeliveryCreate").innerHTML="Sender's Address cannot be empty!!",$("#myModalWrongDeliveryCreate").modal("show"),0):1)&&1==(""==i||null==i?(document.getElementById("wrongraddress").innerHTML="Please give Receiver's Address!",$("#wrongraddress").show(),document.getElementById("rec_addressU").focus(),0):1)&&1==(""==o||null==o?(document.getElementById("wrongmaplocation").innerHTML="Receiver's Address on map cannot be empty!",$("#wrongmaplocation").show(),document.getElementById("pac-input3").focus(),0):1)&&1==(""==h||""==p?(document.getElementById("wrongmaplocation").innerHTML="Please select Receiver's Address on map!",$("#wrongmaplocation").show(),document.getElementById("pac-input3").focus(),0):1)&&(document.getElementById("modalApproveDC").disabled=!0,document.getElementById("modalCancelDC").disabled=!0,$(".btn-ok-updateDC").attr("disabled",!0),$(".cancelModDC").prop("disabled",!0),$("#formUpdateDC").hide(),$(".circle-loader").removeClass("load-complete"),$(".circle-loader").show(),$("#sure3DC").html("Please wait!"),$("#sure3DC").show(),$.ajax({async:!0,type:"PUT",url:urlForAll+"delivery/update/full/"+org_ID+"/"+creator_ID+"/"+del_id,data:JSON.stringify({collection_name:D,creator_id:creator_ID,delivery_charge:e,delivery_type:m,sender_address:a,receiver_address:i,sender_phone_number:d,receiver_phone_number:l,sender_name:n,receiver_name:r,payment_method:s,product_cost:E,sender_lat:g,sender_longi:y,receiver_lat:h,receiver_longi:p,product_name:v,product_qty:b,pickup_time:t,delivery_note:c,delivery_area:u,delivery_created_date:I,delivery_created_by_name:_,delivery_created_by_role:B,delivery_status:w}),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(e){var t=$("#dtBasicExampled").DataTable();t.cell({row:t.row($t.closest("tr")).index(),column:4}).data(e.data.pickup_time),t.cell({row:t.row($t.closest("tr")).index(),column:8}).data(e.data.receiver_name),t.cell({row:t.row($t.closest("tr")).index(),column:9}).data(e.data.receiver_phone_number),t.cell({row:t.row($t.closest("tr")).index(),column:10}).data(e.data.delivery_area),t.cell({row:t.row($t.closest("tr")).index(),column:11}).data(e.data.receiver_address),t.cell({row:t.row($t.closest("tr")).index(),column:13}).data(e.data.product_name),t.cell({row:t.row($t.closest("tr")).index(),column:14}).data(e.data.product_qty),t.cell({row:t.row($t.closest("tr")).index(),column:15}).data(e.data.product_cost),t.cell({row:t.row($t.closest("tr")).index(),column:16}).data(e.data.delivery_charge),t.cell({row:t.row($t.closest("tr")).index(),column:17}).data(e.data.payment_method),t.cell({row:t.row($t.closest("tr")).index(),column:18}).data(e.data.delivery_note),document.getElementById(""+id_delivery_update).id=e.data.delivery_Id+"$$"+e.data.creator_id+"$$"+e.data.delivery_charge+"$$"+e.data.pickup_time+"$$"+e.data.receiver_name+"$$"+e.data.receiver_phone_number+"$$"+e.data.product_name+"$$"+e.data.product_qty+"$$"+e.data.payment_method+"$$"+e.data.product_cost+"$$"+e.data.delivery_note+"$$"+e.data.delivery_area+"$$"+e.data.receiver_address+"$$"+e.data.receiver_lat+"$$"+e.data.receiver_longi+"$$"+e.data.sender_name+"$$"+e.data.sender_phone_number+"$$"+e.data.sender_address+"$$"+e.data.delivery_type+"$$"+e.data.sender_lat+"$$"+e.data.sender_longi+"$$"+e.data.delivery_created_date+"$$"+e.data.delivery_created_by_name+"$$"+e.data.delivery_created_by_role+"$$"+e.data.collection_name+"$$"+e.data.delivery_status,setTimeout((function(){$(".circle-loader").addClass("load-complete"),$("#tick3DC").show(),$("#sure3DC").html("Delivery Updated!")}),1500),setTimeout((function(){$("#myModalDeliveryCostUpdate").modal("hide"),$(".btn-ok-updateDC").attr("disabled",!1),$(".cancelModDC").prop("disabled",!1)}),3e3)},error:function(e){setTimeout((function(){$(".btn-ok-updateDC").attr("disabled",!1),$(".cancelModDC").prop("disabled",!1)}),900),$("#myModalDeliveryCostUpdate").modal("hide"),$("#myModal2").modal("show")}}))}));var wrongKeteDao2=()=>{$("#wrongpercostR").hide(),$("#wrongrpqtyR").hide(),$("#wrongpnameR").hide(),$("#wrongdcostR").hide()};l=0;$("#dtBasicExampleNewj").on("click",".returnIt",(function(){id_delivery_updateR=$(this).attr("id"),arr=id_delivery_updateR.split("$$"),del_id=arr[0],creator_ID=arr[1],document.getElementById("product_nameUR").value=arr[3],document.getElementById("product_qtyUR").value=arr[4],document.getElementById("product_costUR").value=arr[5],document.getElementById("delivery_cost_updateR").value=arr[2],$t=$(this),$("#formReturnUpdate").show(),$("#tickReturn").hide(),$("#circleLoadReturn").hide(),$("#sureReturn").hide(),$("#myModalReturn").modal("show"),wrongKeteDao2()})),$(".btn-okReturn").click((function(){wrongKeteDao2();var e=document.getElementById("delivery_cost_updateR").value,t=String(document.getElementById("product_nameUR").value),n=String(document.getElementById("product_qtyUR").value),d=document.getElementById("product_costUR").value;1==(parseInt(e)<=0||0==e.charAt(0)?(document.getElementById("wrongdcostR").innerHTML="Delivery Charge must be greater than 0!",$("#wrongdcostR").show(),document.getElementById("delivery_cost_updateR").focus(),0):1==isNaN(e)||""==e||0==!/\D/.test(e)?(document.getElementById("wrongdcostR").innerHTML="Delivery Charge must be a number!",$("#wrongdcostR").show(),document.getElementById("delivery_cost_updateR").focus(),0):1==!/\D/.test(e)?1:void 0)&&1==(""==t||null==t?(document.getElementById("wrongpnameR").innerHTML="Product Name cannot be empty!",$("#wrongpnameR").show(),document.getElementById("product_nameUR").focus(),0):1)&&1==(parseInt(n)<=0||0==n.charAt(0)?(document.getElementById("wrongrpqtyR").innerHTML="Product Quantity must be greater than 0!",$("#wrongrpqtyR").show(),document.getElementById("product_qtyUR").focus(),0):1==isNaN(n)||""==n||0==!/\D/.test(n)?(document.getElementById("wrongrpqtyR").innerHTML="Product Quantity must be a number!",$("#wrongrpqtyR").show(),document.getElementById("product_qtyUR").focus(),0):1==!/\D/.test(n)?1:void 0)&&1==(parseInt(d)<=0||0==d.charAt(0)?(document.getElementById("wrongpercostR").innerHTML="Product Cost must be greater than 0!",$("#wrongpercostR").show(),document.getElementById("product_costUR").focus(),0):1==isNaN(d)||""==d||0==!/\D/.test(d)?(document.getElementById("wrongpercostR").innerHTML="Product Cost must be a number!",$("#wrongpercostR").show(),document.getElementById("product_costUR").focus(),0):1==!/\D/.test(d)?1:void 0)&&(document.getElementById("modalApproveGReturn").disabled=!0,document.getElementById("modalCancelGReturn").disabled=!0,$(".btn-okReturn").attr("disabled",!0),$(".btn-cancel-Return").prop("disabled",!0),$("#formReturnUpdate").hide(),$(".circle-loader").removeClass("load-complete"),$(".circle-loader").show(),$("#sureReturn").html("Please wait!"),$("#sureReturn").show(),$.ajax({async:!0,type:"PUT",url:urlForAll+"orgHead/update/return/delivery/"+del_id+"/"+creator_ID+"/"+d+"/"+n+"/"+t+"/"+e,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},success:function(e){setTimeout((function(){$(".circle-loader").addClass("load-complete"),$("#tickReturn").show(),$("#sureReturn").html("Delivery Updated!")}),1500),setTimeout((function(){$("#myModalReturn").modal("hide");var e=$("#dtBasicExampleNewj").DataTable();e.row($t.parents("tr")).remove().draw(),document.getElementById("tenb").innerHTML="Returned Deliveries: "+e.column(0).data().length,$(".btn-okReturn").attr("disabled",!1),$(".btn-cancel-Return").prop("disabled",!1)}),3e3)},error:function(e){setTimeout((function(){$(".btn-okReturn").attr("disabled",!1),$(".btn-cancel-Return").prop("disabled",!1)}),900),$("#myModalReturn").modal("hide"),$("#myModal2").modal("show")}}))}));